<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<!-- Mirrored from positivebet.com/en/bets/index by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 26 Feb 2018 11:24:08 GMT -->
<!-- Added by HTTrack -->
<meta http-equiv="content-type" content="text/html;charset=UTF-8"/><!-- /Added by HTTrack -->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="language" content="en"/>
    <meta name="referrer" content="no-referrer"/>

    <link rel="stylesheet" type="text/css" href="../static/themes/bootstrap_orig/css/styles.css"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="stylesheet" type="text/css" href="../static/assets/f9fbe11d/select2.min.css"/>
    <link rel="stylesheet" type="text/css" href="../static/assets/d07f6b1f/css/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="../static/assets/d07f6b1f/css/bootstrap-responsive.min.css"/>
    <link rel="stylesheet" type="text/css" href="../static/assets/d07f6b1f/css/yii.css"/>
    <link rel="stylesheet" type="text/css" href="../static/css/bets.css"/>
    <script type="text/javascript" src="../static/assets/fd5d19f3/jquery.min.js"></script>
    <script type="text/javascript" src="../static/assets/fd5d19f3/jquery.cookie.js"></script>
    <script type="text/javascript"
            src="https://ddgu.ddos-guard.net/ddgu/?h=aHR0cHM6Ly9wb3NpdGl2ZWJldC5jb20=&amp;u=L2Fzc2V0cy9mZDVkMTlmMy9qcXVlcnkueWlpYWN0aXZlZm9ybS5qcw=="></script>
    <script type="text/javascript" src="../static/assets/fd5d19f3/jquery.ba-bbq.min.js"></script>
    <script type="text/javascript" src="../static/assets/f9fbe11d/select2.full.min.js"></script>
    <script type="text/javascript" src="../static/assets/d07f6b1f/js/bootstrap.min.js"></script>
    <title>Scanner of live betting. PositiveBet.com - Live bets</title>
    <meta name="description" content="Scanner of live betting. PositiveBet.com - Live bets"/>
    <meta name="keywords"
          content="live вилки, лайв вилки, лайф вилки, сервис live вилок, сканер live вилок, сервис вилок, сканер вилок, live betting, live arbs, bet scanner, arb scanner, scanner live betting, scanner live arbs"/>


</head>

<body>

<div class="container" id="page">


    <!-- breadcrumbs -->

    <div class="row">
        <div class="span12">
            <div id="content">


                <form class="well form-inline" id="formCalc" action="https://positivebet.com/en/bets/index"
                      method="post">
                    <input type="hidden"
                           value="QlEwVUJSTFR5WGpyaWRNeXE3cTNnM1k5WEJhUVJRYk3Mm_cIdit14sy9k15Wmyge3TI6XX39yg3UJnmZUB4OJg=="
                           name="YII_CSRF_TOKEN"/>
                    <audio id="sndNewEvent">
                        <source src="https://positivebet.com/sounds/postman.mp3" type="audio/mpeg">
                        <source src="https://positivebet.com/sounds/postman.ogg" type="audio/ogg">
                        <embed src="https://positivebet.com/sounds/postman.mp3">
                    </audio>


                    <div style="display:inline">
                        <div id="lProfitForBoth" style="float:left;margin-right:5px;"></div>
                        <label id="lEvent_name1" for=""></label>
                        <div id="div_ext" style="float:right;">
                        </div>
                    </div>
                    <table>
                        <thead>
                        <tr>
                            <td align="center" style="width:122px;">
                                Bookmaker
                            </td>
                            <td align="center" style="display:none">
                                Event
                            </td>
                            <td align="center" style="width:180px;">
                                Bet
                            </td>
                            <td style="min-width:9px">
                            </td>
                            <td align="center">
                                <div>
                                    Odds <a href="#" rel="tooltip" style="float:right;" title="Auto refresh odds"><label
                                        class="checkbox" for="chkAutoUpdateOdd"><input id="ytchkAutoUpdateOdd"
                                                                                       type="hidden" value="0"
                                                                                       name="Bets[auto_update_odd]"/><input
                                        id="chkAutoUpdateOdd" style="margin-left: 10px;" name="Bets[auto_update_odd]"
                                        value="1" type="checkbox"/>
                                    <span class="help-block error" id="Bets_auto_update_odd_em_"
                                          style="display: none"></span></label></a>
                                </div>
                            </td>
                            <td>
                                <a class="refreshOdd" id="aRefreshOddBoth" style="vertical-align:middle;" href="#"
                                   data-original-title="Refresh odd" onclick="
        event.preventDefault();
        var bid1 = $('#bet_id1').attr('value');
        var bid2 = $('#bet_id2').attr('value');
        var eid1 = $('#event_id1').attr('value');
        var eid2 = $('#event_id2').attr('value');
        var elid = parseInt($('#event_l_id').attr('value'));

        refreshOdd(bid1, bid2, eid1, eid2, elid, $(this), 0, 1, function(){
          needFillddBooker1 = true;
          needFillddBooker2 = true;
        });
        return false;
        "><img src="../static/images/refresh.png" alt="Refresh odd"></a></td>
                            <td id="td_Commission0" align="right" style="display: none;">
                                Commission
                            </td>
                            <td id="td_WithoutCommission0" style="display: none;">
                            </td>
                            <td align="center">
                                Bet
                            </td>
                            <td id="td_Liability0" align="center" style="display: none;">
                                Liability
                            </td>
                            <td align="center">
                                Currency
                            </td>
                            <td align="center">
                                <a href="#" rel="tooltip" title="The bet on which the profit will be distributed">D</a>
                            </td>
                            <td align="center">
                                <a href="#" rel="tooltip" title="Fix bet amount">F</a>
                            </td>
                            <td align="center">
                                Profit
                            </td>
                            <td align="center">
                                Rounding
                            </td>
                            <td align="center">
                            </td>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td align="left">
                                <a class="copyClipboard" rel="tooltip" href="#" data-original-title="Copy to clipboard"
                                   data-delay='{"show":"700", "hide":"0"}' style="margin-left:0px;margin-right:2px;"
                                   onclick="event.preventDefault(); var t = $('#lnkEvent_name1').text(); if (t.indexOf(' vs ') > -1) t = t.substring(0, t.indexOf(' vs ')); copyTextToClipboard(t); return false;"><img
                                        src="../static/images/glyphicons/glyphicons-155-more-windows9.png"
                                        alt="Copy to clipboard"></a>
                                <div id="div_Booker1" style="display:none"><select id="ddBooker1" name="ddBooker1">
                                    <option value="0" selected="selected">Bookie 1</option>
                                </select></div>
                            </td>
                            <td style="display:none">
                                <a id="lnkEvent_name1" target="_blank" rel="noopener noreferrer"
                                   style="margin-left: 7px;"></a></td>
                            <td align="center">
                                <div id="lBet1" style="display: inline; margin-left: 4px; white-space:nowrap">Bet 1
                                </div>
                            </td>
                            <td>
                                <img id="imgArrow1" src="../static/images/arrowfreeze.png"></td>
                            <td>
                                <input id="tfCoef1" class="span1" placeholder="Коэф" name="Bets[coef1]" type="text"
                                       value="2"/></td>
                            <td>
                                <a class="refreshOdd" id="aRefreshOdd1" style="vertical-align:middle;" href="#"
                                   data-original-title="Refresh odd" onclick="
        event.preventDefault();
        var bid1 = $('#bet_id1').attr('value');
        var bid2 = undefined;
        var eid1 = $('#event_id1').attr('value');
        var eid2 = undefined;
        var elid = parseInt($('#event_l_id').attr('value'));

        refreshOdd(bid1, bid2, eid1, eid2, elid, $(this), 0, 1, function(){
          needFillddBooker1 = true;
        });
        return false;
        "><img src="../static/images/refresh.png" alt="Refresh odd"></a></td>
                            <td id="td_Commission1" style="display: none;">
                                <div class="input-append"><input id="tfCommission1" class="span1"
                                                                 style="margin-left: 7px; width:30px;"
                                                                 placeholder="Комиссия" name="Bets[commission1]"
                                                                 type="text" value="0"/><span class="add-on">%</span>
                                </div>
                            </td>
                            <td id="td_WithoutCommission1" style="display: none;">
                                <span id="lCommission1" class="label">0</span></td>
                            <td>
                                <input id="tfStake1" class="span1" style="margin-left: 7px;" placeholder="Ставка"
                                       name="Bets[stake1]" type="text" value="50"/></td>
                            <td id="td_Liability1" style="display: none;">
                                <input id="tfLiability1" class="span1" style="margin-left: 7px;"
                                       placeholder="Обязательства" name="Bets[liability1]" type="text" value="50"/></td>
                            <td>
                                <select id="ddlCurrency1" class="span1" style="margin-left:7px;width:65px;"
                                        name="Bets[currency1]">
                                    <option value="1">RUB</option>
                                    <option value="2" selected="selected">USD</option>
                                    <option value="3">EUR</option>
                                    <option value="4">UAH</option>
                                    <option value="5">PLN</option>
                                    <option value="6">KZT</option>
                                    <option value="7">BYN</option>
                                    <option value="8">GBP</option>
                                    <option value="9">AMD</option>
                                    <option value="10">AUD</option>
                                </select></td>
                            <td>
                                <label class="checkbox" for="cbDistribute_stake1"><input id="ytcbDistribute_stake1"
                                                                                         type="hidden" value="0"
                                                                                         name="Bets[distribute_stake1]"/><input
                                        id="cbDistribute_stake1" style="margin-left: 7px;"
                                        name="Bets[distribute_stake1]" value="1" checked="checked" type="checkbox"/>
                                    <span class="help-block error" id="Bets_distribute_stake1_em_"
                                          style="display: none"></span></label></td>
                            <td>
                                <label class="radio" for="rbFix_stake1"><input value="1" id="rbFix_stake1"
                                                                               style="margin-left: 5px; margin-right: 7px;"
                                                                               name="Bets[fix_stake]" type="radio"/>
                                    <span class="help-block error" id="Bets_fix_stake_em_" style="display: none"></span></label>
                            </td>
                            <td>
                                <span id="lProfit1" class="label label-success"></span></td>
                            <td>
                                <select id="ddlroundPrecision1" class="span1" style="margin-left: 7px;"
                                        name="Bets[roundPrecision1]">
                                    <option value="7">1000</option>
                                    <option value="8">500</option>
                                    <option value="1">100</option>
                                    <option value="9">50</option>
                                    <option value="2">10</option>
                                    <option value="6">5</option>
                                    <option value="3" selected="selected">1</option>
                                    <option value="4">0.1</option>
                                    <option value="5">0.01</option>
                                </select>
                            </td>
                            <td>
                                <input type="hidden" class="form-control" id="booker_id1" value=""><input type="hidden"
                                                                                                          class="form-control"
                                                                                                          id="event_id1"
                                                                                                          value=""><input
                                    type="hidden" class="form-control" id="bet_id1" value=""><input type="hidden"
                                                                                                    class="form-control"
                                                                                                    id="se"
                                                                                                    value="1"><input
                                    type="hidden" class="form-control" id="rip" value="1"><input type="hidden"
                                                                                                 class="form-control"
                                                                                                 id="hl"
                                                                                                 value="0"><input
                                    type="hidden" class="form-control" id="event_l_id" value=""><input type="hidden"
                                                                                                       class="form-control"
                                                                                                       id="crid"
                                                                                                       value=""><input
                                    type="hidden" class="form-control" id="k1" value=""></td>
                        </tr>
                        <tr>
                            <td align="left">
                                <a class="copyClipboard" rel="tooltip" href="#" data-original-title="Copy to clipboard"
                                   data-delay='{"show":"700", "hide":"0"}' style="margin-left:0px;margin-right:2px;"
                                   onclick="event.preventDefault(); var t = $('#lnkEvent_name2').text(); if (t.indexOf(' vs ') > -1) t = t.substring(0, t.indexOf(' vs ')); copyTextToClipboard(t); return false;"><img
                                        src="../static/images/glyphicons/glyphicons-155-more-windows9.png"
                                        alt="Copy to clipboard"></a>
                                <div id="div_Booker2" style="display:none"><select id="ddBooker2" name="ddBooker2">
                                    <option value="0" selected="selected">Bookie 2</option>
                                </select></div>
                            </td>
                            <td style="display:none">
                                <a id="lnkEvent_name2" target="_blank" rel="noopener noreferrer"
                                   style="margin-left: 7px;"></a></td>
                            <td align="center">
                                <div id="lBet2" style="display: inline; margin-left: 4px; white-space:nowrap">Bet 2
                                </div>
                            </td>
                            <td>
                                <img id="imgArrow2" src="../static/images/arrowfreeze.png"></td>
                            <td>
                                <input id="tfCoef2" class="span1" placeholder="Коэф" name="Bets[coef2]" type="text"
                                       value="2"/></td>
                            <td>
                                <a class="refreshOdd" id="aRefreshOdd2" style="vertical-align:middle;" href="#"
                                   data-original-title="Refresh odd" onclick="
        event.preventDefault();
        var bid1 = undefined;
        var bid2 = $('#bet_id2').attr('value');
        var eid1 = undefined;
        var eid2 = $('#event_id2').attr('value');
        var elid = parseInt($('#event_l_id').attr('value'));

        refreshOdd(bid1, bid2, eid1, eid2, elid, $(this), 0, 1, function(){
          needFillddBooker2 = true;
        });
        return false;

        "><img src="../static/images/refresh.png" alt="Refresh odd"></a></td>
                            <td id="td_Commission2" style="display: none;">
                                <div class="input-append"><input id="tfCommission2" class="span1"
                                                                 style="margin-left: 7px; width:30px;"
                                                                 placeholder="Комиссия" name="Bets[commission2]"
                                                                 type="text" value="0"/><span class="add-on">%</span>
                                </div>
                            </td>
                            <td id="td_WithoutCommission2" style="display: none;">
                                <span id="lCommission2" class="label">0</span></td>
                            <td>
                                <input id="tfStake2" class="span1" style="margin-left: 7px;" placeholder="Ставка"
                                       name="Bets[stake2]" type="text" value="50"/></td>
                            <td id="td_Liability2" style="display: none;">
                                <input id="tfLiability2" class="span1" style="margin-left: 7px;"
                                       placeholder="Обязательства" name="Bets[liability2]" type="text" value="50"/></td>
                            <td>
                                <select id="ddlCurrency2" class="span1" style="margin-left:7px;width:65px;"
                                        name="Bets[currency2]">
                                    <option value="1">RUB</option>
                                    <option value="2" selected="selected">USD</option>
                                    <option value="3">EUR</option>
                                    <option value="4">UAH</option>
                                    <option value="5">PLN</option>
                                    <option value="6">KZT</option>
                                    <option value="7">BYN</option>
                                    <option value="8">GBP</option>
                                    <option value="9">AMD</option>
                                    <option value="10">AUD</option>
                                </select></td>
                            <td>
                                <label class="checkbox" for="cbDistribute_stake2"><input id="ytcbDistribute_stake2"
                                                                                         type="hidden" value="0"
                                                                                         name="Bets[distribute_stake2]"/><input
                                        id="cbDistribute_stake2" style="margin-left: 7px;"
                                        name="Bets[distribute_stake2]" value="1" checked="checked" type="checkbox"/>
                                    <span class="help-block error" id="Bets_distribute_stake2_em_"
                                          style="display: none"></span></label></td>
                            <td>
                                <label class="radio" for="rbFix_stake2"><input value="2" id="rbFix_stake2"
                                                                               style="margin-left: 5px; margin-right: 7px;"
                                                                               name="Bets[fix_stake]" type="radio"/>
                                    <span class="help-block error" id="Bets_fix_stake_em_" style="display: none"></span></label>
                            </td>
                            <td>
                                <span id="lProfit2" class="label label-important"></span></td>
                            <td>
                                <select id="ddlroundPrecision2" class="span1" style="margin-left: 7px;"
                                        name="Bets[roundPrecision2]">
                                    <option value="7">1000</option>
                                    <option value="8">500</option>
                                    <option value="1">100</option>
                                    <option value="9">50</option>
                                    <option value="2">10</option>
                                    <option value="6">5</option>
                                    <option value="3" selected="selected">1</option>
                                    <option value="4">0.1</option>
                                    <option value="5">0.01</option>
                                </select></td>
                            <td>
                                <input type="hidden" class="form-control" id="booker_id2" value=""><input type="hidden"
                                                                                                          class="form-control"
                                                                                                          id="event_id2"
                                                                                                          value=""><input
                                    type="hidden" class="form-control" id="bet_id2" value=""><input type="hidden"
                                                                                                    class="form-control"
                                                                                                    id="k2" value="">
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                <nobr><label class="checkbox" for="cbOnly_selected_bookers"><input
                                        id="ytcbOnly_selected_bookers" type="hidden" value="0"
                                        name="Bets[only_selected_bookers]"/><input id="cbOnly_selected_bookers"
                                                                                   style="margin-left: 0px;"
                                                                                   name="Bets[only_selected_bookers]"
                                                                                   value="1" checked="checked"
                                                                                   type="checkbox"/>
                                    Only my bookies<span class="help-block error" id="Bets_only_selected_bookers_em_"
                                                         style="display: none"></span></label>
                                    <nobr>
                            </td>
                            <td style="display:none">
                            </td>
                            <td>
                            </td>
                            <td>
                            </td>
                            <td>
                            </td>
                            <td id="td_Commission3" style="display: none;">
                            </td>
                            <td id="td_WithoutCommission3" style="display: none;">
                            </td>
                            <td id="td_Stake3">
                                <input id="tfStake_all" class="span1" style="margin-left: 7px;"
                                       placeholder="Сумма ставок" name="Bets[stake_all]" type="text" value="100"/></td>
                            <td id="td_Liability3" style="display: none;">
                            </td>
                            <td>
                                <select id="ddlCurrency_all" class="span1" style="margin-left:7px;width:65px;"
                                        name="Bets[currency_all]">
                                    <option value="1">RUB</option>
                                    <option value="2" selected="selected">USD</option>
                                    <option value="3">EUR</option>
                                    <option value="4">UAH</option>
                                    <option value="5">PLN</option>
                                    <option value="6">KZT</option>
                                    <option value="7">BYN</option>
                                    <option value="8">GBP</option>
                                    <option value="9">AMD</option>
                                    <option value="10">AUD</option>
                                </select></td>
                            <td>
                            </td>
                            <td>
                                <label class="radio" for="rbFix_stake_all"><input value="0" id="rbFix_stake_all"
                                                                                  style="margin-left: 5px; margin-right: 7px;"
                                                                                  name="Bets[fix_stake]"
                                                                                  checked="checked" type="radio"/>
                                    <span class="help-block error" id="Bets_fix_stake_em_" style="display: none"></span></label>
                            </td>
                            <td>
                                <input id="hdIs_direct_1" name="Bets[is_direct_1]" type="hidden" value="1"/><input
                                    id="hdIs_direct_2" name="Bets[is_direct_2]" type="hidden" value="1"/></td>
                            <td>
                            </td>
                        </tr>
                        </tbody>
                    </table>

                </form>


                <div id="gridBets" class="grid-view">
                    <table class="items table table-striped table-bordered table-condensed">
                        <thead>
                        <tr>
                            <th class="button-column" id="gridBets_c0">&nbsp;</th>
                            <th id="gridBets_c1">Profit,%</th>
                            <th id="gridBets_c2">Bookmaker</th>
                            <th id="gridBets_c3">Event</th>
                            <th id="gridBets_c4">Bet</th>
                            <th id="gridBets_c5">Odds</th>
                            <th style="display:none" id="gridBets_c6">kef1</th>
                            <th style="display:none" id="gridBets_c7">kef2</th>
                            <th style="display:none" id="gridBets_c8">is_direct_1</th>
                            <th style="display:none" id="gridBets_c9">is_direct_2</th>
                            <th style="display:none" id="gridBets_c10">bet1</th>
                            <th style="display:none" id="gridBets_c11">bet2</th>
                            <th style="display:none" id="gridBets_c12">bet_id1</th>
                            <th style="display:none" id="gridBets_c13">bet_id2</th>
                            <th style="display:none" id="gridBets_c14">event_id1</th>
                            <th style="display:none" id="gridBets_c15">event_id2</th>
                            <th style="display:none" id="gridBets_c16">needPlaySound</th>
                            <th style="display:none" id="gridBets_c17">booker_id1</th>
                            <th style="display:none" id="gridBets_c18">booker_id2</th>
                            <th style="display:none" id="gridBets_c19">event_l_id</th>
                            <th style="display:none" id="gridBets_c20">k1</th>
                            <th style="display:none" id="gridBets_c21">k2</th>
                        </tr>
                        </thead>
                        <tbody> TABLE_LINES</tbody>
                    </table>
                    <div class="keys" style="display:none" title="/en/bets/index">
                        <span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span>1971451420</span><span>845271113</span><span>1192896233</span><span>2251863744</span><span>2314830200</span>
                    </div>
                </div>


                <script>

                    var refreshIntervalID;
                    var round_precision1 = 0;
                    var round_precision2 = 0;
                    var cookieExpireDays = 30;
                    var lastUpdateDate = new Date();
                    var oddLastUpdateDate = new Date();
                    var oddNullUpdateCnt = 0;
                    var isFirstTime = true;
                    var needFillddBooker1 = false;
                    var needFillddBooker2 = false;
                    var cridd = new Date();

                    var omd = {};

                    var rowsCurrencyRate = $.parseJSON('{"1":"1.00000000","2":"56.76080000","3":"69.63410000","4":"2.09527000","5":"16.63950000","6":"0.17748800","7":"28.90800000","8":"78.88050000","9":"0.11810400","10":"44.33020000"}');
                    var settingsJSON = $.parseJSON('{"round_precision":4,"hide_links":0,"booker_settings":{"11":{"name":"10bet","active":"0","commission":"0","base_url":"index.html\/\/www.10bet.com\/","currency_id":"2","round_precision":null},"3":{"name":"188bet","active":"0","commission":"0","base_url":"index.html\/\/www.188bet.com\/","currency_id":"2","round_precision":null},"22":{"name":"1xbet","active":"0","commission":"0","base_url":"index.html\/\/www.1xbet.com\/","currency_id":"2","round_precision":null},"30":{"name":"888sport","active":"0","commission":"0","base_url":"index.html\/\/www.888sport.com\/en\/","currency_id":"2","round_precision":null},"18":{"name":"baltbet","active":"0","commission":"0","base_url":"index.html\/\/baltplay.com\/","currency_id":"2","round_precision":null},"15":{"name":"bet-at-home","active":"0","commission":"0","base_url":"index.html\/\/www.bet-at-home.com\/","currency_id":"2","round_precision":null},"10":{"name":"bet365","active":"0","commission":"0","base_url":"index.html\/\/mobile.bet365.com\/","currency_id":"2","round_precision":null},"1":{"name":"betcity","active":"0","commission":"0","base_url":"index.html\/\/betsbc.com\/","currency_id":"2","round_precision":null},"17":{"name":"betfair","active":"0","commission":"6.5","base_url":"index.html\/\/www.betfair.com\/","currency_id":"2","round_precision":null},"32":{"name":"betfair sport","active":"0","commission":"0","base_url":"index.html\/\/www.betfair.com\/","currency_id":"2","round_precision":null},"31":{"name":"betrally","active":"0","commission":"0","base_url":"index.html\/\/www.betrally.com\/","currency_id":"2","round_precision":null},"4":{"name":"bwin","active":"0","commission":"0","base_url":"index.html\/\/livebetting.bwin.com\/","currency_id":"2","round_precision":null},"33":{"name":"dafabet","active":"0","commission":"0","base_url":"index.html\/\/www.dafabet.com\/","currency_id":"2","round_precision":null},"16":{"name":"favbet","active":"0","commission":"0","base_url":"index.html\/\/www.favbet.com\/","currency_id":"2","round_precision":null},"9":{"name":"fonbet","active":"0","commission":"0","base_url":"index.html\/\/www.fonbet.com\/","currency_id":"2","round_precision":null},"34":{"name":"gamebookers","active":"0","commission":"0","base_url":"index.html\/\/livebetting.gamebookers.com\/","currency_id":"2","round_precision":null},"29":{"name":"ladbrokes","active":"0","commission":"0","base_url":"index.html\/\/sports.ladbrokes.com","currency_id":"2","round_precision":null},"25":{"name":"leon","active":"0","commission":"0","base_url":"index.html\/\/www.leonbets.net\/","currency_id":"2","round_precision":null},"21":{"name":"liga stavok","active":"0","commission":"0","base_url":"index.html\/\/liga-bets12.com\/","currency_id":"2","round_precision":null},"2":{"name":"marathon","active":"0","commission":"0","base_url":"index.html\/\/www.marathonbet.com\/","currency_id":"2","round_precision":null},"36":{"name":"matchbook","active":"0","commission":"1","base_url":"index.html\/\/www.matchbook.com\/","currency_id":"2","round_precision":null},"38":{"name":"melbet","active":"0","commission":"0","base_url":"index.html\/\/melbet.org\/","currency_id":"2","round_precision":null},"19":{"name":"olimp","active":"0","commission":"0","base_url":"index.html\/\/olimp.com\/","currency_id":"2","round_precision":null},"27":{"name":"paddypower","active":"0","commission":"0","base_url":"index.html\/\/www.paddypower.com\/","currency_id":"2","round_precision":null},"14":{"name":"parimatch","active":"0","commission":"0","base_url":"index.html\/\/www.parimatch.com\/","currency_id":"2","round_precision":null},"12":{"name":"pinnacle","active":"0","commission":"0","base_url":"index.html\/\/beta.pinnacle.com\/","currency_id":"2","round_precision":null},"7":{"name":"sbobet","active":"0","commission":"0","base_url":"index.html\/\/www.sbobet.com\/","currency_id":"2","round_precision":null},"6":{"name":"sportingbet","active":"0","commission":"0","base_url":"index.html\/\/livebetting.sportingbet.com\/","currency_id":"2","round_precision":null},"39":{"name":"sportingbull","active":"0","commission":"0","base_url":"index.html\/\/www.sportingbullru.com\/","currency_id":"2","round_precision":null},"26":{"name":"tennisi","active":"0","commission":"0","base_url":"index.html\/\/tennisi.com\/","currency_id":"2","round_precision":null},"28":{"name":"titanbet","active":"0","commission":"0","base_url":"index.html\/\/sports.titanbet.com","currency_id":"2","round_precision":null},"8":{"name":"unibet","active":"0","commission":"0","base_url":"index.html\/\/www.unibet.com\/","currency_id":"2","round_precision":null},"24":{"name":"vbet","active":"0","commission":"0","base_url":"index.html\/\/www.vbet.com\/","currency_id":"2","round_precision":null},"5":{"name":"william hill","active":"0","commission":"0","base_url":"index.html\/\/sports.williamhill.com\/","currency_id":"2","round_precision":null},"20":{"name":"winlinebet","active":"0","commission":"0","base_url":"index.html\/\/bkwinline3.com\/","currency_id":"2","round_precision":null},"23":{"name":"zenit","active":"0","commission":"0","base_url":"index.html\/\/zenitbet.com\/","currency_id":"2","round_precision":null},"35":{"name":"zirkabet","active":"0","commission":"0","base_url":"index.html\/\/www.zirkabet.com\/","currency_id":"2","round_precision":null}}}');
                    var aOnlyThisBetValue = 'Only this bet';
                    var aAllWithValue = 'All with: ';
                    var aExtension = 'Extension';
                    var aFunctionUnavailable = 'Function is not available. You need to <a href=/en/subscription/index><b>subscribe.</b></a>';
                    var aAddToCalc = 'You need to add the surebet into the calculator.';


                    if (typeof(Storage) !== "undefined") {
                        //storageRefreshIntervalID = window.setInterval(function(){deleteOldHiddenBets()}, 300000);
                    }
                    ;


                    $(document).ready(function () {
                        $('#div_Booker1').css('display', 'inline-block');
                        $('#div_Booker2').css('display', 'inline-block');


                        if (typeof(Storage) !== "undefined") {
                        }
                        ;
                        initializeCalc(function () {/*actualizeCalc();*/
                        });

                        var isChrome = !!window.chrome && !!window.chrome.webstore;
                        if (isChrome && $('#se').prop('value') == '0' /*|| $('#rip').prop('value') == '0'*/) {
                            var extLink = $("<a />", {
                                href: document.location.origin + "/extension",
                                text: aExtension
                            });
                            $('#div_ext').append(extLink);
                        }
                    });


                    function doc_keyUp(e) {
                        //if (e.altKey) {
                        var target_class = $(event.target).attr('class');
                        if (target_class != 'span1' && target_class != 'input-large') {
                            if (e.keyCode == 82) { //R
                                $('#btnRefresh').click();
                            }
                            else if (e.keyCode == 49) { //1
                                $('#aRefreshOdd1').click();
                            }
                            else if (e.keyCode == 50) { //2
                                $('#aRefreshOdd2').click();
                            }
                            else if (e.keyCode == 51) { //3
                                $('#aRefreshOddBoth').click();
                            }
                        }
                    }

                    document.addEventListener('keyup', doc_keyUp, false);

                    //window.onload = initializeCalc(function() {/*actualizeCalc();*/});
                    //$('#btnRefresh').click(function(){alert("0000");});


                    function rowsHide(row_id, bet_id1, bet_id2, event_id1, event_id2, event_l_id) {

                        $.ajax({
                            url: "rowshide",
                            data: {
                                'row_id': row_id,
                                'bet_id1': bet_id1,
                                'bet_id2': bet_id2,
                                'event_id1': event_id1,
                                'event_id2': event_id2,
                                'event_l_id': event_l_id,
                                'isAjax': 'true'
                            },
                        }).done(function (data) {
                            if (data == 'logout') {
                                window.location.href = "https://positivebet.com/user/logout?message=featureLogin";
                            }
                        });


                        if (typeof row_id != 'undefined') {
                            $("#" + row_id).remove();
                        }

                        if (typeof bet_id1 != 'undefined' || typeof bet_id2 != 'undefined' || typeof event_id1 != 'undefined' || typeof event_id2 != 'undefined' || typeof event_l_id != 'undefined') {

                            $("#gridBets > table > tbody > tr").each(function () {
                                $this = $(this)

                                //var v_row_id = $this.attr("id");
                                var v_bet_id1 = $this.children(":nth-child(13)").html();
                                var v_bet_id2 = $this.children(":nth-child(14)").html();
                                var v_event_id1 = $this.children(":nth-child(15)").html();
                                var v_event_id2 = $this.children(":nth-child(16)").html();
                                var v_event_l_id = $this.children(":nth-child(20)").html();

                                if (typeof bet_id1 != 'undefined') {
                                    if (v_bet_id1 == bet_id1 || v_bet_id2 == bet_id1) {
                                        $this.remove();
                                    }
                                }
                                if (typeof bet_id2 != 'undefined') {
                                    if (v_bet_id1 == bet_id2 || v_bet_id2 == bet_id2) {
                                        $this.remove();
                                    }
                                }
                                if (typeof event_id1 != 'undefined') {
                                    if (v_event_id1 == event_id1 || v_event_id2 == event_id1) {
                                        $this.remove();
                                    }
                                }
                                if (typeof event_id2 != 'undefined') {
                                    if (v_event_id1 == event_id2 || v_event_id2 == event_id2) {
                                        $this.remove();
                                    }
                                }
                                if (typeof event_l_id != 'undefined') {
                                    if (v_event_l_id == event_l_id) {
                                        $this.remove();
                                    }
                                }
                            });
                        }
                    }


                    function autoRefresh(isAutoRefreshActive) {
                        window.clearInterval(refreshIntervalID);

                        if (isAutoRefreshActive || typeof isAutoRefreshActive == "undefined" && $('#btnAutoRefresh').prop('class') == 'btn active') {
                            if ($('#chkAutoUpdateOdd').is(':checked')) {
                                if (isAutoRefreshActive || typeof isAutoRefreshActive == "undefined" && $('#btnAutoRefresh').prop('class') == 'btn active' || $('#chkAutoUpdateOdd').is(':checked')) {
                                    updateGrid(true, function () {
                                        var bid1 = $('#bet_id1').prop('value');
                                        var bid2 = $('#bet_id2').prop('value');
                                        var eid1 = $('#event_id1').prop('value');
                                        var eid2 = $('#event_id2').prop('value');
                                        var elid = parseInt($('#event_l_id').prop('value'));
                                        var aRefreshOddBoth = $('#aRefreshOddBoth');

                                        refreshOdd(bid1, bid2, eid1, eid2, elid, aRefreshOddBoth, 0, 1, function () {
                                            refreshIntervalID = window.setInterval(function () {
                                                autoRefresh(undefined)
                                            }, 4000);
                                            needFillddBooker1 = true;
                                            needFillddBooker2 = true;
                                        });
                                    });
                                }
                            }
                            else {
                                if (isAutoRefreshActive || typeof isAutoRefreshActive == "undefined" && $('#btnAutoRefresh').prop('class') == 'btn active' || $('#chkAutoUpdateOdd').is(':checked')) {
                                    updateGrid(true, function () {
                                        refreshIntervalID = window.setInterval(function () {
                                            autoRefresh(undefined)
                                        }, 4000);
                                    });
                                }
                            }
                        }
                        else {
                            if ($('#chkAutoUpdateOdd').is(':checked')) {
                                if (isAutoRefreshActive || typeof isAutoRefreshActive == "undefined" && $('#btnAutoRefresh').prop('class') == 'btn active' || $('#chkAutoUpdateOdd').is(':checked')) {
                                    var bid1 = $('#bet_id1').prop('value');
                                    var bid2 = $('#bet_id2').prop('value');
                                    var eid1 = $('#event_id1').prop('value');
                                    var eid2 = $('#event_id2').prop('value');
                                    var elid = parseInt($('#event_l_id').prop('value'));
                                    var aRefreshOddBoth = $('#aRefreshOddBoth');

                                    refreshOdd(bid1, bid2, eid1, eid2, elid, aRefreshOddBoth, 0, 1, function () {
                                        refreshIntervalID = window.setInterval(function () {
                                            autoRefresh(undefined)
                                        }, 4000);
                                        needFillddBooker1 = true;
                                        needFillddBooker2 = true;
                                    });
                                }
                            }
                        }


                    }


                    function updateGrid(isAutoUpdate, callback) {

                        //if (!isAutoUpdate){
                        if (!isFirstTime) {
                            var currentDate = new Date();
                            var diffSec = (currentDate.getTime() - lastUpdateDate.getTime()) / 1000;
                            if (diffSec < 2) {
                                if (typeof callback == "function") callback();
                                return;
                            }
                        }
                        lastUpdateDate = new Date();
                        isFirstTime = false;

                        $('#gridBets').yiiGridView('update', {
                            //$.fn.yiiGridView.update('gridBets', {
                            data: {
                                'markNewEvent': ($('#btnPlaySound').prop('class') == 'btn active'),
                                'perPage': $('#ddlPerPage').prop('value'),
                                'crid': $('#crid').prop('value'),
                                'event_name': $('#tfevent_name').prop('value'),
                                'au': isAutoUpdate,
                                'isAjax': 'true'
                            },
                            //url: $(this).prop('href'),
                            complete: function (jqXHR, status) {
//alert(JSON.stringify(jqXHR));
                                if (status == 'success') {
                                    if (typeof callback == "function") callback();

                                    var needPlaySound = 0;

                                    if (($('#btnPlaySound').prop('class') == 'btn active') && $("#gridBets > table > tbody > tr:first > td:eq(16)").html() == 1) {
                                        needPlaySound = 1;
                                    }

                                    if (jqXHR.responseText == 'alreadyUsed') {
                                        window.location.href = "https://positivebet.com/user/logout?message=alreadyUsed"
                                    }
                                    else if (jqXHR.responseText == 'someError') {
                                        window.location.href = "https://positivebet.com/user/logout?message=someError"
                                    }
                                    else if (jqXHR.responseText == 'featureLogin') {
                                        window.location.href = "https://positivebet.com/user/logout?message=featureLogin"
                                    }
                                    else {

                                        if (needPlaySound == 1) {
                                            document.getElementById('sndNewEvent').play();
                                        }
                                    }
                                }
                            }
                        })
                    }

                    $('#btnRefresh').on('click', null,
                        function () {
                            updateGrid(false);
                        });


                    $('#btnAutoRefresh').on('click', null,
                        function () {
                            if ($('#btnAutoRefresh').prop('class') == 'btn active') {
                                if (!$('#chkAutoUpdateOdd').is(':checked'))
                                    autoRefresh(false);
                            }
                            else
                                autoRefresh(true);
                        });

                    $("#chkAutoUpdateOdd").change(
                        function (event) {
                            if ($('#chkAutoUpdateOdd').is(':checked') || $('#btnAutoRefresh').prop('class') == 'btn')
                                autoRefresh(undefined)
                        });


                    $('#btnRowsShow').on('click', null,
                        function () {
                            $.ajax({
                                url: "rowsshow",
                                isAjax: 'true'
                            });
                        });


                    $('#btnPlaySound').on('click', null,
                        function () {

                            var btnPlaySound = $('#btnPlaySound');
                            if (!btnPlaySound.prop('href')) {
                                var btnPlaySound_class;
                                if (btnPlaySound.prop('class') == 'btn') {
                                    btnPlaySound_class = 'btn active';
                                }
                                else {
                                    btnPlaySound_class = 'btn';
                                }
                                $.cookie('btnPlaySound_class', btnPlaySound_class, {
                                    expires: cookieExpireDays,
                                    path: '/'
                                });
                            }

                        });


                    $("#ddlPerPage").change(function (event) {

                        var ddlPerPage_value = $('#ddlPerPage').prop('value');
                        if (ddlPerPage_value)
                            $.cookie('ddlPerPage_value', ddlPerPage_value, {expires: cookieExpireDays, path: '/'});

                    });


                    function initializeButton() {
                        var btnPlaySound = $('#btnPlaySound');
                        if (!btnPlaySound.prop('href')) {
                            var btnPlaySound_class = $.cookie('btnPlaySound_class');
                            if (btnPlaySound_class)
                                $('#btnPlaySound').prop('class', btnPlaySound_class);
                        }


                        var ddlPerPage_value = $.cookie('ddlPerPage_value');
                        if (ddlPerPage_value)
                            $('#ddlPerPage').prop('value', ddlPerPage_value);
                    }

                    function initializeCalc(callback) {
                        var cbDistribute_stake1_checked = $.cookie('cbDistribute_stake1_checked');
                        var cbDistribute_stake2_checked = $.cookie('cbDistribute_stake2_checked');
                        var rbFix_stake_checked = $.cookie('rbFix_stake_checked');
                        var ddlCurrency1_value = $.cookie('ddlCurrency1_value');
                        var ddlCurrency2_value = $.cookie('ddlCurrency2_value');
                        var ddlCurrency_all_value = $.cookie('ddlCurrency_all_value');
                        var ddlroundPrecision1_value = $.cookie('ddlroundPrecision1_value');
                        var ddlroundPrecision2_value = $.cookie('ddlroundPrecision2_value');
                        var cbOnly_selected_bookers_checked = $.cookie('cbOnly_selected_bookers_checked');


                        if (cbDistribute_stake1_checked)
                            $('#cbDistribute_stake1').prop('checked', cbDistribute_stake1_checked == 'true');
                        if (cbDistribute_stake2_checked)
                            $('#cbDistribute_stake2').prop('checked', cbDistribute_stake2_checked == 'true');
                        if (rbFix_stake_checked) {
                            switch (rbFix_stake_checked) {
                                case '0':
                                    $('#rbFix_stake_all').prop('checked', true);
                                    break;
                                case '1':
                                    $('#rbFix_stake1').prop('checked', true);
                                    break;
                                case '2':
                                    $('#rbFix_stake2').prop('checked', true);
                                    break;
                            }
                        }

                        if (ddlCurrency1_value)
                            $('#ddlCurrency1').prop('value', ddlCurrency1_value);
                        if (ddlCurrency2_value)
                            $('#ddlCurrency2').prop('value', ddlCurrency2_value);
                        if (ddlCurrency_all_value)
                            $('#ddlCurrency_all').prop('value', ddlCurrency_all_value);
                        if (ddlroundPrecision1_value)
                            $('#ddlroundPrecision1').prop('value', ddlroundPrecision1_value);
                        if (ddlroundPrecision2_value)
                            $('#ddlroundPrecision2').prop('value', ddlroundPrecision2_value);
                        if (cbOnly_selected_bookers_checked)
                            $('#cbOnly_selected_bookers').prop('checked', cbOnly_selected_bookers_checked == 'true');

                        initializeButton();

                        callback();
                    }

                    function roundNumber(number, precision) {

                        if (precision == 6) {
                            var multiple = Math.pow(5, -1);
                        }
                        else if (precision == 8) {
                            var multiple = Math.pow(500, -1);
                        }
                        else if (precision == 9) {
                            var multiple = Math.pow(50, -1);
                        }
                        else {
                            var multiple = Math.pow(10, precision);
                        }

                        var rndedNum = Math.round(number * multiple) / multiple;
                        return rndedNum;
                    }


                    function visibilityControls(is_direct_1_value, is_direct_2_value, commission_value1, commission_value2) {
                        if (commission_value1 > 0 || commission_value2 > 0) {
                            $('#td_Commission0').css("display", "inline");
                            $('#td_Commission1').css("display", "inline");
                            $('#td_Commission2').css("display", "inline");
                            $('#td_Commission3').css("display", "inline");
                            $('#td_WithoutCommission0').css("display", "inline");
                            $('#td_WithoutCommission1').css("display", "inline");
                            $('#td_WithoutCommission2').css("display", "inline");
                            $('#td_WithoutCommission3').css("display", "inline");

                            if (is_direct_1_value == 0 || is_direct_2_value == 0) {
                                $('#td_Liability0').css("display", "inline");
                                $('#td_Liability1').css("display", "inline");
                                $('#td_Liability2').css("display", "inline");
                                $('#td_Liability3').css("display", "inline");

                                if ($("#tfStake_all").parent().prop('id') != 'td_Liability3')
                                    $("#tfStake_all").appendTo("#td_Liability3");
                            }
                            else {
                                $('#td_Liability0').css("display", "none");
                                $('#td_Liability1').css("display", "none");
                                $('#td_Liability2').css("display", "none");
                                $('#td_Liability3').css("display", "none");

                                if ($("#tfStake_all").parent().prop('id') != 'td_Stake3')
                                    $("#tfStake_all").appendTo("#td_Stake3");
                            }
                        }
                        else {

                            $('#td_Commission0').css("display", "none");
                            $('#td_Commission1').css("display", "none");
                            $('#td_Commission2').css("display", "none");
                            $('#td_Commission3').css("display", "none");
                            $('#td_WithoutCommission0').css("display", "none");
                            $('#td_WithoutCommission1').css("display", "none");
                            $('#td_WithoutCommission2').css("display", "none");
                            $('#td_WithoutCommission3').css("display", "none");
                            $('#td_Liability0').css("display", "none");
                            $('#td_Liability1').css("display", "none");
                            $('#td_Liability2').css("display", "none");
                            $('#td_Liability3').css("display", "none");

                            if ($("#tfStake_all").parent().prop('id') != 'td_Stake3')
                                $("#tfStake_all").appendTo("#td_Stake3");
                        }
                        if (is_direct_1_value == 0) {
                            $('#tfLiability1').prop('disabled', false);
                        }
                        else {
                            $('#tfLiability1').prop('disabled', true);
                        }
                        if (is_direct_2_value == 0) {
                            $('#tfLiability2').prop('disabled', false);
                        }
                        else {
                            $('#tfLiability2').prop('disabled', true);
                        }

                    }

                    function actualizeCalc(sender_name) {
//    var round_precision = 0;
//    var cookieExpireDays = 30;


                        function convertCurrency(currency_id1, currency_id2, value) {

                            var result = value;
                            if (rowsCurrencyRate[currency_id2] != 0) {
                                result = rowsCurrencyRate[currency_id1] / rowsCurrencyRate[currency_id2] * value;
                            }
                            return result;

                        }

                        function getFloat(value) {
                            var result = value;
                            result = parseFloat(result.replace(',', '.'));
                            return result;
                        }

//1=1/КефПрямой + 1/КефОбратный
//обяз = кеф * ставка - ставка
//ставка = обяз / (кеф - 1)
//O1 = K1 * C1 - C1
//C1 = O1 / (K1 - 1)
                        /*
C2 = S / K2
C1 = S / K1
C2 = C1 / (K2 - 1)
S = K1 * C1
*/


                        function tfStake_allCalc() {
                            if (rbFix_stake_all_checked) {
                                if (cbDistribute_stake1_checked && cbDistribute_stake2_checked || !cbDistribute_stake1_checked && !cbDistribute_stake2_checked) {
                                    if (hdIs_direct_2_value == 1) {
                                        tfLiability1.prop('value', roundNumber(tfCoef2_value / (commissionValue1 + tfCoef2_value) * convertCurrency(ddlCurrency_all_value, ddlCurrency1_value, tfStake_all_value), round_precision1));
                                        tfLiability2.prop('value', roundNumber(convertCurrency(ddlCurrency_all_value, ddlCurrency2_value, tfStake_all_value) - convertCurrency(ddlCurrency1_value, ddlCurrency2_value, getFloat(tfLiability1.prop('value'))), round_precision2));
                                    }
                                    else {
                                        tfLiability2.prop('value', roundNumber(tfCoef1_value / (commissionValue2 + tfCoef1_value) * convertCurrency(ddlCurrency_all_value, ddlCurrency2_value, tfStake_all_value), round_precision2));
                                        tfLiability1.prop('value', roundNumber(convertCurrency(ddlCurrency_all_value, ddlCurrency1_value, tfStake_all_value) - convertCurrency(ddlCurrency2_value, ddlCurrency1_value, getFloat(tfLiability2.prop('value'))), round_precision1));
                                    }
                                    //tfLiability1.prop('value', roundNumber(tfCoef2_value/(commissionValue1 + tfCoef2_value) * convertCurrency(ddlCurrency_all_value, ddlCurrency1_value, tfStake_all_value), round_precision));
                                    //tfLiability2.prop('value', roundNumber(convertCurrency(ddlCurrency_all_value, ddlCurrency2_value, tfStake_all_value) - convertCurrency(ddlCurrency1_value, ddlCurrency2_value, getFloat(tfLiability1.prop('value'))), round_precision));
                                }
                                else if (cbDistribute_stake1_checked) {
                                    tfLiability2.prop('value', roundNumber(convertCurrency(ddlCurrency_all_value, ddlCurrency2_value, tfStake_all_value) / commissionValue2, round_precision2));
                                    tfLiability1.prop('value', roundNumber(convertCurrency(ddlCurrency_all_value, ddlCurrency1_value, tfStake_all_value) - convertCurrency(ddlCurrency2_value, ddlCurrency1_value, getFloat(tfLiability2.prop('value'))), round_precision1));
                                }
                                else if (cbDistribute_stake2_checked) {
                                    tfLiability1.prop('value', roundNumber(convertCurrency(ddlCurrency_all_value, ddlCurrency1_value, tfStake_all_value) / commissionValue1, round_precision1));
                                    tfLiability2.prop('value', roundNumber(convertCurrency(ddlCurrency_all_value, ddlCurrency2_value, tfStake_all_value) - convertCurrency(ddlCurrency1_value, ddlCurrency2_value, getFloat(tfLiability1.prop('value'))), round_precision2));
                                }
                            }
                            else if (rbFix_stake1_checked) {
                                tfLiability2.prop('value', roundNumber(convertCurrency(ddlCurrency_all_value, ddlCurrency2_value, tfStake_all_value) - convertCurrency(ddlCurrency1_value, ddlCurrency2_value, getFloat(tfLiability1.prop('value'))), round_precision2));
                            }
                            else if (rbFix_stake2_checked) {
                                tfLiability1.prop('value', roundNumber(convertCurrency(ddlCurrency_all_value, ddlCurrency1_value, tfStake_all_value) - convertCurrency(ddlCurrency2_value, ddlCurrency1_value, getFloat(tfLiability2.prop('value'))), round_precision1));
                            }


                            //обяз = кеф * ставка - ставка
                            //ставка = обяз / (кеф - 1)
                            if (hdIs_direct_1_value == 1) {
                                tfStake1.prop('value', tfLiability1.prop('value'));
                            }
                            else {
                                tfStake1.prop('value', roundNumber(getFloat(tfLiability1.prop('value')) / (tfCoef1_value - 1), round_precision1));
                            }
                            if (hdIs_direct_2_value == 1) {
                                tfStake2.prop('value', tfLiability2.prop('value'));
                            }
                            else {
                                tfStake2.prop('value', roundNumber(getFloat(tfLiability2.prop('value')) / (tfCoef2_value - 1), round_precision2));
                            }

                        };

                        function tfStake1Calc() {

                            if (hdIs_direct_1_value == 1) {
                                tfLiability1.prop('value', tfStake1.prop('value'));
                            }
                            else {
                                tfLiability1.prop('value', roundNumber(tfCoef1_value * getFloat(tfStake1.prop('value')) - getFloat(tfStake1.prop('value')), round_precision1));
                            }

                            if (rbFix_stake1_checked) {
                                if (cbDistribute_stake1_checked && cbDistribute_stake2_checked || !cbDistribute_stake1_checked && !cbDistribute_stake2_checked) {
                                    tfLiability2.prop('value', roundNumber(commissionValue1 * convertCurrency(ddlCurrency1_value, ddlCurrency2_value, getFloat(tfLiability1.prop('value'))) / commissionValue2, round_precision2));
                                    tfStake_all.prop('value', roundNumber(convertCurrency(ddlCurrency2_value, ddlCurrency_all_value, getFloat(tfLiability2.prop('value'))) + convertCurrency(ddlCurrency1_value, ddlCurrency_all_value, getFloat(tfLiability1.prop('value'))), 2));
                                }
                                else if (cbDistribute_stake1_checked) {
                                    tfLiability2.prop('value', roundNumber(convertCurrency(ddlCurrency1_value, ddlCurrency2_value, getFloat(tfLiability1.prop('value'))) / (commissionValue2 - 1), round_precision2));
                                    tfStake_all.prop('value', roundNumber(convertCurrency(ddlCurrency2_value, ddlCurrency_all_value, getFloat(tfLiability2.prop('value'))) + convertCurrency(ddlCurrency1_value, ddlCurrency_all_value, getFloat(tfLiability1.prop('value'))), 2));
                                }
                                else if (cbDistribute_stake2_checked) {
                                    //tfStake_all.prop('value', /*roundNumber(*/commissionValue1 * convertCurrency(ddlCurrency1_value, ddlCurrency_all_value, getFloat(tfLiability1.prop('value')))/*, round_precision1)*/);
                                    var tmpStake_all = commissionValue1 * convertCurrency(ddlCurrency1_value, ddlCurrency_all_value, getFloat(tfLiability1.prop('value')));
                                    tfLiability2.prop('value', roundNumber(convertCurrency(ddlCurrency_all_value, ddlCurrency2_value, tmpStake_all) - convertCurrency(ddlCurrency1_value, ddlCurrency2_value, getFloat(tfLiability1.prop('value'))), round_precision2));
                                    tfStake_all.prop('value', roundNumber(convertCurrency(ddlCurrency2_value, ddlCurrency_all_value, getFloat(tfLiability2.prop('value'))) + convertCurrency(ddlCurrency1_value, ddlCurrency_all_value, getFloat(tfLiability1.prop('value'))), 2));
                                }
                            }
                            else if (rbFix_stake2_checked)
                                tfStake_all.prop('value', roundNumber(convertCurrency(ddlCurrency1_value, ddlCurrency_all_value, getFloat(tfLiability1.prop('value'))) + convertCurrency(ddlCurrency2_value, ddlCurrency_all_value, getFloat(tfLiability2.prop('value'))), 2));
                            else if (rbFix_stake_all_checked)
                                tfLiability2.prop('value', roundNumber(convertCurrency(ddlCurrency_all_value, ddlCurrency2_value, tfStake_all_value) - convertCurrency(ddlCurrency1_value, ddlCurrency2_value, getFloat(tfLiability1.prop('value'))), round_precision2));


                            if (hdIs_direct_2_value == 1) {
                                tfStake2.prop('value', tfLiability2.prop('value'));
                            }
                            else {
                                tfStake2.prop('value', roundNumber(getFloat(tfLiability2.prop('value')) / (tfCoef2_value - 1), round_precision2));
                            }

                        }

                        function tfStake2Calc() {

                            if (hdIs_direct_2_value == 1) {
                                tfLiability2.prop('value', tfStake2.prop('value'));
                            }
                            else {
                                tfLiability2.prop('value', roundNumber(tfCoef2_value * getFloat(tfStake2.prop('value')) - getFloat(tfStake2.prop('value')), round_precision2));
                            }

                            if (rbFix_stake2_checked) {
                                if (cbDistribute_stake1_checked && cbDistribute_stake2_checked || !cbDistribute_stake1_checked && !cbDistribute_stake2_checked) {
                                    tfLiability1.prop('value', roundNumber(commissionValue2 * convertCurrency(ddlCurrency2_value, ddlCurrency1_value, getFloat(tfLiability2.prop('value'))) / commissionValue1, round_precision1));
                                    tfStake_all.prop('value', roundNumber(convertCurrency(ddlCurrency1_value, ddlCurrency_all_value, getFloat(tfLiability1.prop('value'))) + convertCurrency(ddlCurrency2_value, ddlCurrency_all_value, getFloat(tfLiability2.prop('value'))), 2));
                                }
                                else if (cbDistribute_stake1_checked) {
                                    //tfStake_all.prop('value', /*roundNumber(*/commissionValue2 * convertCurrency(ddlCurrency2_value, ddlCurrency_all_value, getFloat(tfLiability2.prop('value')))/*, round_precision2)*/);
                                    var tmpStake_all = commissionValue2 * convertCurrency(ddlCurrency2_value, ddlCurrency_all_value, getFloat(tfLiability2.prop('value')));
                                    tfLiability1.prop('value', roundNumber(convertCurrency(ddlCurrency_all_value, ddlCurrency1_value, tmpStake_all) - convertCurrency(ddlCurrency2_value, ddlCurrency1_value, getFloat(tfLiability2.prop('value'))), round_precision1));
                                    tfStake_all.prop('value', roundNumber(convertCurrency(ddlCurrency1_value, ddlCurrency_all_value, getFloat(tfLiability1.prop('value'))) + convertCurrency(ddlCurrency2_value, ddlCurrency_all_value, getFloat(tfLiability2.prop('value'))), 2));
                                }
                                else if (cbDistribute_stake2_checked) {
                                    tfLiability1.prop('value', roundNumber(convertCurrency(ddlCurrency2_value, ddlCurrency1_value, getFloat(tfLiability2.prop('value'))) / (commissionValue1 - 1), round_precision1));
                                    tfStake_all.prop('value', roundNumber(convertCurrency(ddlCurrency1_value, ddlCurrency_all_value, getFloat(tfLiability1.prop('value'))) + convertCurrency(ddlCurrency2_value, ddlCurrency_all_value, getFloat(tfLiability2.prop('value'))), 2));
                                }

                            }
                            else if (rbFix_stake1_checked)
                                tfStake_all.prop('value', roundNumber(convertCurrency(ddlCurrency1_value, ddlCurrency_all_value, getFloat(tfLiability1.prop('value'))) + convertCurrency(ddlCurrency2_value, ddlCurrency_all_value, getFloat(tfLiability2.prop('value'))), 2));
                            else if (rbFix_stake_all_checked)
                                tfLiability1.prop('value', roundNumber(convertCurrency(ddlCurrency_all_value, ddlCurrency1_value, tfStake_all_value) - convertCurrency(ddlCurrency2_value, ddlCurrency1_value, getFloat(tfLiability2.prop('value'))), round_precision1));


                            if (hdIs_direct_1_value == 1) {
                                tfStake1.prop('value', tfLiability1.prop('value'));
                            }
                            else {
                                tfStake1.prop('value', roundNumber(getFloat(tfLiability1.prop('value')) / (tfCoef1_value - 1), round_precision1));
                            }

                        }


//
                        function tfLiability1Calc() {
                            if (rbFix_stake1_checked) {
                                if (cbDistribute_stake1_checked && cbDistribute_stake2_checked || !cbDistribute_stake1_checked && !cbDistribute_stake2_checked) {
                                    tfLiability2.prop('value', roundNumber(commissionValue1 * convertCurrency(ddlCurrency1_value, ddlCurrency2_value, getFloat(tfLiability1.prop('value'))) / commissionValue2, round_precision2));
                                    tfStake_all.prop('value', roundNumber(convertCurrency(ddlCurrency2_value, ddlCurrency_all_value, getFloat(tfLiability2.prop('value'))) + convertCurrency(ddlCurrency1_value, ddlCurrency_all_value, getFloat(tfLiability1.prop('value'))), 2));

                                }
                                else if (cbDistribute_stake1_checked) {
                                    tfLiability2.prop('value', roundNumber(convertCurrency(ddlCurrency1_value, ddlCurrency2_value, getFloat(tfLiability1.prop('value'))) / (commissionValue2 - 1), round_precision2));
                                    tfStake_all.prop('value', roundNumber(convertCurrency(ddlCurrency2_value, ddlCurrency_all_value, getFloat(tfLiability2.prop('value'))) + convertCurrency(ddlCurrency1_value, ddlCurrency_all_value, getFloat(tfLiability1.prop('value'))), 2));
                                }
                                else if (cbDistribute_stake2_checked) {
                                    //tfStake_all.prop('value', /*roundNumber(*/commissionValue1 * convertCurrency(ddlCurrency1_value, ddlCurrency_all_value, getFloat(tfLiability1.prop('value')))/*, round_precision1)*/);
                                    var tmpStake_all = commissionValue1 * convertCurrency(ddlCurrency1_value, ddlCurrency_all_value, getFloat(tfLiability1.prop('value')));
                                    tfLiability2.prop('value', roundNumber(convertCurrency(ddlCurrency_all_value, ddlCurrency2_value, tmpStake_all) - convertCurrency(ddlCurrency1_value, ddlCurrency2_value, getFloat(tfLiability1.prop('value'))), round_precision2));
                                    tfStake_all.prop('value', roundNumber(convertCurrency(ddlCurrency2_value, ddlCurrency_all_value, getFloat(tfLiability2.prop('value'))) + convertCurrency(ddlCurrency1_value, ddlCurrency_all_value, getFloat(tfLiability1.prop('value'))), 2));
                                }

                            }
                            else if (rbFix_stake2_checked)
                                tfStake_all.prop('value', roundNumber(convertCurrency(ddlCurrency1_value, ddlCurrency_all_value, getFloat(tfLiability1.prop('value'))) + convertCurrency(ddlCurrency2_value, ddlCurrency_all_value, getFloat(tfLiability2.prop('value'))), 2));
                            else if (rbFix_stake_all_checked)
                                tfLiability2.prop('value', roundNumber(convertCurrency(ddlCurrency_all_value, ddlCurrency2_value, tfStake_all_value) - convertCurrency(ddlCurrency1_value, ddlCurrency2_value, getFloat(tfLiability1.prop('value'))), round_precision2));


                            if (hdIs_direct_1_value == 1) {
                                tfStake1.prop('value', tfLiability1.prop('value'));
                            }
                            else {
                                tfStake1.prop('value', roundNumber(getFloat(tfLiability1.prop('value')) / (tfCoef1_value - 1), round_precision1));
                            }
                            if (hdIs_direct_2_value == 1) {
                                tfStake2.prop('value', tfLiability2.prop('value'));
                            }
                            else {
                                tfStake2.prop('value', roundNumber(getFloat(tfLiability2.prop('value')) / (tfCoef2_value - 1), round_precision2));
                            }


                        }

                        function tfLiability2Calc() {
                            if (rbFix_stake2_checked) {
                                if (cbDistribute_stake1_checked && cbDistribute_stake2_checked || !cbDistribute_stake1_checked && !cbDistribute_stake2_checked) {

                                    tfLiability1.prop('value', roundNumber(commissionValue2 * convertCurrency(ddlCurrency2_value, ddlCurrency1_value, getFloat(tfLiability2.prop('value'))) / commissionValue1, round_precision1));
                                    tfStake_all.prop('value', roundNumber(convertCurrency(ddlCurrency1_value, ddlCurrency_all_value, getFloat(tfLiability1.prop('value'))) + convertCurrency(ddlCurrency2_value, ddlCurrency_all_value, getFloat(tfLiability2.prop('value'))), 2));

                                }
                                else if (cbDistribute_stake1_checked) {
                                    //tfStake_all.prop('value', roundNumber(tfCoef2_value * convertCurrency(ddlCurrency2_value, ddlCurrency_all_value, tfLiability2_value), round_precision));
                                    //tfStake_all.prop('value', /*roundNumber(*/commissionValue2 * convertCurrency(ddlCurrency2_value, ddlCurrency_all_value, getFloat(tfLiability2.prop('value')))/*, round_precision2)*/);
                                    var tmpStake_all = commissionValue2 * convertCurrency(ddlCurrency2_value, ddlCurrency_all_value, getFloat(tfLiability2.prop('value')));
                                    tfLiability1.prop('value', roundNumber(convertCurrency(ddlCurrency_all_value, ddlCurrency1_value, tmpStake_all) - convertCurrency(ddlCurrency2_value, ddlCurrency1_value, getFloat(tfLiability2.prop('value'))), round_precision1));
                                    tfStake_all.prop('value', roundNumber(convertCurrency(ddlCurrency1_value, ddlCurrency_all_value, getFloat(tfLiability1.prop('value'))) + convertCurrency(ddlCurrency2_value, ddlCurrency_all_value, getFloat(tfLiability2.prop('value'))), 2));
                                }
                                else if (cbDistribute_stake2_checked) {
                                    tfLiability1.prop('value', roundNumber(convertCurrency(ddlCurrency2_value, ddlCurrency1_value, getFloat(tfLiability2.prop('value'))) / (commissionValue1 - 1), round_precision1));
                                    tfStake_all.prop('value', roundNumber(convertCurrency(ddlCurrency1_value, ddlCurrency_all_value, getFloat(tfLiability1.prop('value'))) + convertCurrency(ddlCurrency2_value, ddlCurrency_all_value, getFloat(tfLiability2.prop('value'))), 2));
                                }

                            }
                            else if (rbFix_stake1_checked)
                                tfStake_all.prop('value', roundNumber(convertCurrency(ddlCurrency1_value, ddlCurrency_all_value, getFloat(tfLiability1.prop('value'))) + convertCurrency(ddlCurrency2_value, ddlCurrency_all_value, getFloat(tfLiability2.prop('value'))), 2));
                            else if (rbFix_stake_all_checked)
                                tfLiability1.prop('value', roundNumber(convertCurrency(ddlCurrency_all_value, ddlCurrency1_value, tfStake_all_value) - convertCurrency(ddlCurrency2_value, ddlCurrency1_value, getFloat(tfLiability2.prop('value'))), round_precision1));


                            if (hdIs_direct_1_value == 1) {
                                tfStake1.prop('value', tfLiability1.prop('value'));
                            }
                            else {
                                tfStake1.prop('value', roundNumber(getFloat(tfLiability1.prop('value')) / (tfCoef1_value - 1), round_precision1));
                            }
                            if (hdIs_direct_2_value == 1) {
                                tfStake2.prop('value', tfLiability2.prop('value'));
                            }
                            else {
                                tfStake2.prop('value', roundNumber(getFloat(tfLiability2.prop('value')) / (tfCoef2_value - 1), round_precision2));
                            }

                        }

//
                        var tfCoef1_value = getFloat($('#tfCoef1').prop('value'));
                        var tfCoef2_value = getFloat($('#tfCoef2').prop('value'));
                        var tfStake1 = $('#tfStake1');
                        var tfStake1_value = getFloat(tfStake1.prop('value'));
                        var tfStake2 = $('#tfStake2');
                        var tfStake2_value = getFloat(tfStake2.prop('value'));
                        var tfStake_all = $('#tfStake_all');
                        var tfStake_all_value = getFloat(tfStake_all.prop('value'));


                        var tfCommission1_value = getFloat($('#tfCommission1').prop('value'));
                        var tfCommission2_value = getFloat($('#tfCommission2').prop('value'));
                        var lCommission1 = $('#lCommission1');
                        var lCommission2 = $('#lCommission2');

                        var tfLiability1 = $('#tfLiability1');
                        var tfLiability2 = $('#tfLiability2');
                        var tfLiability1_value = getFloat(tfLiability1.prop('value'));
                        var tfLiability2_value = getFloat(tfLiability2.prop('value'));


                        var hdIs_direct_1_value = parseInt($('#hdIs_direct_1').prop('value'));
                        var hdIs_direct_2_value = parseInt($('#hdIs_direct_2').prop('value'));


                        var ddlCurrency1_value = $('#ddlCurrency1').prop('value');
                        var ddlCurrency2_value = $('#ddlCurrency2').prop('value');
                        var ddlCurrency_all_value = $('#ddlCurrency_all').prop('value');
                        var cbDistribute_stake1_checked = $('#cbDistribute_stake1').is(':checked');
                        var cbDistribute_stake2_checked = $('#cbDistribute_stake2').is(':checked');
                        var rbFix_stake1_checked = $('#rbFix_stake1').is(':checked');
                        var rbFix_stake2_checked = $('#rbFix_stake2').is(':checked');
                        var rbFix_stake_all_checked = $('#rbFix_stake_all').is(':checked');
                        var lProfit1 = $('#lProfit1');
                        var lProfit2 = $('#lProfit2');
                        //var ddBooker1 = $('#ddBooker1');
                        //var ddBooker2 = $('#ddBooker2');

                        //var lEvent_name1_value = $('#lEvent_name1').text();
                        //var lnkEvent_name1_value = $('#lnkEvent_name1').text();
                        //var lnkEvent_name2_value = $('#lnkEvent_name2').text();
                        //var ddBooker1= $('#ddBooker1');
                        //var ddBooker2= $('#ddBooker2');

                        var lBet1_value = $('#lBet1').text();
                        var lBet2_value = $('#lBet2').text();

                        var cbOnly_selected_bookers_checked = $('#cbOnly_selected_bookers').is(':checked');

                        //var lnkEvent_name1 = $('#lnkEvent_name1');
                        //var lnkEvent_name2 = $('#lnkEvent_name2');

                        //var btnCalcClear = $('#btnCalcClear');

                        var ddlroundPrecision1_value = parseInt($('#ddlroundPrecision1').prop('value'));
                        var ddlroundPrecision2_value = parseInt($('#ddlroundPrecision2').prop('value'));


                        switch (ddlroundPrecision1_value) {
                            case 1:
                                round_precision1 = -2;
                                break;
                            case 2:
                                round_precision1 = -1;
                                break;
                            case 3:
                                round_precision1 = 0;
                                break;
                            case 4:
                                round_precision1 = 1;
                                break;
                            case 5:
                                round_precision1 = 2;
                                break;
                            case 6:
                                round_precision1 = 6;
                                break;
                            case 7:
                                round_precision1 = -3;
                                break;
                            case 8:
                                round_precision1 = 8;
                                break;
                            case 9:
                                round_precision1 = 9;
                                break;
                        }


                        switch (ddlroundPrecision2_value) {
                            case 1:
                                round_precision2 = -2;
                                break;
                            case 2:
                                round_precision2 = -1;
                                break;
                            case 3:
                                round_precision2 = 0;
                                break;
                            case 4:
                                round_precision2 = 1;
                                break;
                            case 5:
                                round_precision2 = 2;
                                break;
                            case 6:
                                round_precision2 = 6;
                                break;
                            case 7:
                                round_precision2 = -3;
                                break;
                            case 8:
                                round_precision2 = 8;
                                break;
                            case 9:
                                round_precision2 = 9;
                                break;
                        }


                        var booker_id1 = $('#booker_id1').prop('value');
                        var booker_id2 = $('#booker_id2').prop('value');
                        if (booker_id1 && booker_id2) {
                            //var commission1 = settingsJSON.booker_settings[booker_id1].commission;
                            //var commission2 = settingsJSON.booker_settings[booker_id2].commission;
                            visibilityControls(hdIs_direct_1_value, hdIs_direct_2_value, tfCommission1_value, tfCommission2_value);
                        }


                        //"серый" = ("прямой" - 1)*(1 - ком/100) + 1
                        if (hdIs_direct_1_value == 1) {
                            var coef1 = tfCoef1_value;
                            //var commissionValue1 = roundNumber(tfCoef1_value - tfCoef1_value * tfCommission1_value / 100, 2);
                            var commissionValue1 = roundNumber((tfCoef1_value - 1) * (1 - tfCommission1_value / 100) + 1, 3);
                        }
                        else {
                            var coef1 = roundNumber(tfCoef1_value / (tfCoef1_value - 1), 4)
                            var commissionValue1 = roundNumber((coef1 - 1) * (1 - tfCommission1_value / 100) + 1, 3);
                        }
                        lCommission1.text(commissionValue1);

                        if (hdIs_direct_2_value == 1) {
                            var coef2 = tfCoef2_value;
                            //var commissionValue2 = roundNumber(tfCoef2_value - tfCoef2_value * tfCommission2_value / 100, 2);
                            var commissionValue2 = roundNumber((tfCoef2_value - 1) * (1 - tfCommission2_value / 100) + 1, 3);
                        }
                        else {
                            var coef2 = roundNumber(tfCoef2_value / (tfCoef2_value - 1), 4)
                            var commissionValue2 = roundNumber((coef2 - 1) * (1 - tfCommission2_value / 100) + 1, 3);
                        }
                        lCommission2.text(commissionValue2);


                        switch (sender_name) {
                            case 'tfStake_all':
                                tfStake_allCalc();
                                break;
                            case 'tfStake1':
                                tfStake1Calc();
                                break;
                            case 'tfStake2':
                                tfStake2Calc();
                                break;
                            case 'tfLiability1':
                                tfLiability1Calc();
                                break;
                            case 'tfLiability2':
                                tfLiability2Calc();
                                break;
                            default:
                                if (rbFix_stake_all_checked)
                                    tfStake_allCalc();
                                else if (rbFix_stake1_checked)
                                    tfStake1Calc();
                                else if (rbFix_stake2_checked)
                                    tfStake2Calc();
                        }


                        //var profit1 = roundNumber(tfCoef1_value * getFloat(tfStake1.prop('value')) - convertCurrency(ddlCurrency_all_value, ddlCurrency1_value, getFloat(tfStake_all.prop('value'))), 2);
                        //var profit1 = roundNumber(commissionValue1 * getFloat(tfLiability1.prop('value')) - convertCurrency(ddlCurrency_all_value, ddlCurrency1_value, getFloat(tfStake_all.prop('value'))), 2);
                        var profit1 = roundNumber((commissionValue1 - 1) * getFloat(tfLiability1.prop('value')) - convertCurrency(ddlCurrency2_value, ddlCurrency1_value, getFloat(tfLiability2.prop('value'))), 2);
                        setlProfit(lProfit1, profit1);

                        //var profit2 = roundNumber(tfCoef2_value * getFloat(tfStake2.prop('value')) - convertCurrency(ddlCurrency_all_value, ddlCurrency2_value, getFloat(tfStake_all.prop('value'))), 2);
                        //var profit2 = roundNumber(commissionValue2 * getFloat(tfLiability2.prop('value')) - convertCurrency(ddlCurrency_all_value, ddlCurrency2_value, getFloat(tfStake_all.prop('value'))), 2);
                        var profit2 = roundNumber((commissionValue2 - 1) * getFloat(tfLiability2.prop('value')) - convertCurrency(ddlCurrency1_value, ddlCurrency2_value, getFloat(tfLiability1.prop('value'))), 2);
                        setlProfit(lProfit2, profit2);

                        var profitForBoth = roundNumber((1 - 1 / (1 + (roundNumber(coef1, 2) - 1) * (1 - tfCommission1_value / 100)) - 1 / (1 + (roundNumber(coef2, 2) - 1) * (1 - tfCommission2_value / 100))) / (1 / (1 + (roundNumber(coef1, 2) - 1) * (1 - tfCommission1_value / 100)) + 1 / (1 + (roundNumber(coef2, 2) - 1) * (1 - tfCommission2_value / 100))) * 100, 2);
                        $('#lProfitForBoth').html(profitForBoth + '%');

                        $.cookie('cbDistribute_stake1_checked', cbDistribute_stake1_checked, {
                            expires: cookieExpireDays,
                            path: '/'
                        });
                        $.cookie('cbDistribute_stake2_checked', cbDistribute_stake2_checked, {
                            expires: cookieExpireDays,
                            path: '/'
                        });
                        if (rbFix_stake_all_checked)
                            $.cookie('rbFix_stake_checked', 0, {expires: cookieExpireDays, path: '/'});
                        else if (rbFix_stake1_checked)
                            $.cookie('rbFix_stake_checked', 1, {expires: cookieExpireDays, path: '/'});
                        else if (rbFix_stake2_checked)
                            $.cookie('rbFix_stake_checked', 2, {expires: cookieExpireDays, path: '/'});
                        $.cookie('ddlCurrency1_value', ddlCurrency1_value, {expires: cookieExpireDays, path: '/'});
                        $.cookie('ddlCurrency2_value', ddlCurrency2_value, {expires: cookieExpireDays, path: '/'});
                        $.cookie('ddlCurrency_all_value', ddlCurrency_all_value, {
                            expires: cookieExpireDays,
                            path: '/'
                        });
                        $.cookie('ddlroundPrecision1_value', ddlroundPrecision1_value, {
                            expires: cookieExpireDays,
                            path: '/'
                        });
                        $.cookie('ddlroundPrecision2_value', ddlroundPrecision2_value, {
                            expires: cookieExpireDays,
                            path: '/'
                        });
                        $.cookie('cbOnly_selected_bookers_checked', cbOnly_selected_bookers_checked, {
                            expires: cookieExpireDays,
                            path: '/'
                        });
                    }


                    function setlProfit(label, profit) {
                        label.text(profit);
                        if (profit >= 0)
                            label.prop('class', 'label label-success');
                        else
                            label.prop('class', 'label label-important');
                    }


                    $('#btnCalcClear').click(function () {
                        actualizeCalc();
                        var btn = $(this);
                        btn.button('test');
                        setTimeout(function () {
                            btn.button('reset');
                        }, 3000);
                    });

                    $("#tfCoef1").keyup(function (event) {

                        actualizeCalc();
                        if (event.which == 13) {
                            event.preventDefault();
                        }
                    });

                    $("#tfCoef2").keyup(function (event) {
                        actualizeCalc();
                    });

                    $("#tfStake1").keyup(function (event) {
                        if (event.which == 13) {
                            $('#rbFix_stake1').prop('checked', true);
                        }
                        actualizeCalc(this.id);
                    });
                    $("#tfStake2").keyup(function (event) {
                        if (event.which == 13) {
                            $('#rbFix_stake2').prop('checked', true);
                        }
                        actualizeCalc(this.id);
                    });
                    $("#tfStake_all").keyup(function (event) {
                        if (event.which == 13) {
                            $('#rbFix_stake_all').prop('checked', true);
                        }
                        actualizeCalc(this.id);
                    });


                    $("#tfLiability1").keyup(function (event) {
                        actualizeCalc(this.id);
                    });
                    $("#tfLiability2").keyup(function (event) {
                        actualizeCalc(this.id);
                    });


                    $("#tfCommission1").keyup(function (event) {
                        actualizeCalc();
                    });
                    $("#tfCommission2").keyup(function (event) {
                        actualizeCalc();
                    });


                    $("#cbDistribute_stake1").change(function (event) {
                        actualizeCalc();
                    });
                    $("#cbDistribute_stake2").change(function (event) {
                        actualizeCalc();
                    });


                    $("#rbFix_stake1").change(function (event) {
                        actualizeCalc();
                    });
                    $("#rbFix_stake2").change(function (event) {
                        actualizeCalc();
                    });
                    $("#rbFix_stake_all").change(function (event) {
                        actualizeCalc();
                    });

                    $("#ddlCurrency1").change(function (event) {
                        actualizeCalc();
                    });
                    $("#ddlCurrency2").change(function (event) {
                        actualizeCalc();
                    });
                    $("#ddlCurrency_all").change(function (event) {
                        actualizeCalc();
                    });
                    $("#ddlroundPrecision1").change(function (event) {
                        actualizeCalc();
                    });
                    $("#ddlroundPrecision2").change(function (event) {
                        actualizeCalc();
                    });


                    $("#cbOnly_selected_bookers").change(function (event) {
                        //$('#aRefreshOddBoth').click();
                        //actualizeCalc();
                    });
                    $("#tfevent_name").keydown(function (event) {
                        if (event.keyCode == 13) {
                            event.preventDefault();
                            return false;
                        }
                    });


                    function booker1Change(refresh_currency) {
                        var booker_id1 = undefined;
                        var booker_id2 = undefined;
                        var booker1 = undefined;
                        var booker2 = undefined;
                        var coef1 = undefined;
                        var coef2 = undefined;
                        var event_name1 = undefined;
                        var event_name2 = undefined;
                        var event_name_full1 = undefined;
                        var event_name_full2 = undefined;
                        var bet1 = undefined;
                        var bet2 = undefined;
                        var eventUrl1 = undefined;
                        var eventUrl2 = undefined;
                        var is_direct_1 = undefined;
                        var is_direct_2 = undefined;
                        var event_l_id = undefined;
                        var k1 = undefined;
                        var k2 = undefined;
                        var row_id = undefined;
                        var bet_id1 = undefined;
                        var bet_id2 = undefined;
                        var event_id1 = undefined;
                        var event_id2 = undefined;
                        var arrow_src1 = undefined;
                        var arrow_src2 = undefined;
                        var v1 = undefined;
                        var v2 = undefined;

                        booker_id1 = $('#ddBooker1').prop('value');


                        if (settingsJSON.hasOwnProperty("coefs1")) {
                            booker1 = settingsJSON.booker_settings[booker_id1].name;
                            coef1 = settingsJSON.coefs1[booker_id1].coef;
                            event_name1 = settingsJSON.coefs1[booker_id1].event_name;
                            event_name_full1 = settingsJSON.coefs1[booker_id1].event_name_full;
                            bet1 = settingsJSON.coefs1[booker_id1].bet;
                            eventUrl1 = settingsJSON.coefs1[booker_id1].eventUrl;
                            k1 = settingsJSON.coefs1[booker_id1].k;
                            bet_id1 = settingsJSON.coefs1[booker_id1].bet_id;
                            event_id1 = settingsJSON.coefs1[booker_id1].event_id;
                            arrow_src1 = settingsJSON.coefs1[booker_id1].arrow_src;
                            v1 = settingsJSON.coefs1[booker_id1].v;

                            var k2 = $('#k2').prop('value');
                            var row = $('#gridBets tr').has('td:nth-child(21):contains("' + k1 + '")').has('td:nth-child(22):contains("' + k2 + '")');
                            var row_id = k1 + k2;

                            addToCalc(refresh_currency, booker_id1, booker_id2, booker1, booker2, coef1, coef2, event_name1, event_name2,
                                event_name_full1, event_name_full2, bet1, bet2, eventUrl1, eventUrl2, is_direct_1, is_direct_2, event_l_id, k1, k2, row_id, bet_id1, bet_id2,
                                event_id1, event_id2, arrow_src1, arrow_src2, row, v1, v2);

                            //actualizeCalc();
                        }
                    }


                    function booker2Change(refresh_currency) {
                        var booker_id1 = undefined;
                        var booker_id2 = undefined;
                        var booker1 = undefined;
                        var booker2 = undefined;
                        var coef1 = undefined;
                        var coef2 = undefined;
                        var event_name1 = undefined;
                        var event_name2 = undefined;
                        var event_name_full1 = undefined;
                        var event_name_full2 = undefined;
                        var bet1 = undefined;
                        var bet2 = undefined;
                        var eventUrl1 = undefined;
                        var eventUrl2 = undefined;
                        var is_direct_1 = undefined;
                        var is_direct_2 = undefined;
                        var event_l_id = undefined;
                        var k1 = undefined;
                        var k2 = undefined;
                        var row_id = undefined;
                        var bet_id1 = undefined;
                        var bet_id2 = undefined;
                        var event_id1 = undefined;
                        var event_id2 = undefined;
                        var arrow_src1 = undefined;
                        var arrow_src2 = undefined;
                        var v1 = undefined;
                        var v2 = undefined;

                        booker_id2 = $('#ddBooker2').prop('value');


                        if (settingsJSON.hasOwnProperty("coefs2")) {
                            booker2 = settingsJSON.booker_settings[booker_id2].name;
                            coef2 = settingsJSON.coefs2[booker_id2].coef;
                            event_name2 = settingsJSON.coefs2[booker_id2].event_name;
                            event_name_full2 = settingsJSON.coefs2[booker_id2].event_name_full;
                            bet2 = settingsJSON.coefs2[booker_id2].bet;
                            eventUrl2 = settingsJSON.coefs2[booker_id2].eventUrl;
                            k2 = settingsJSON.coefs2[booker_id2].k;
                            bet_id2 = settingsJSON.coefs2[booker_id2].bet_id;
                            event_id2 = settingsJSON.coefs2[booker_id2].event_id;
                            arrow_src2 = settingsJSON.coefs2[booker_id2].arrow_src;
                            v2 = settingsJSON.coefs2[booker_id2].v;

                            var k1 = $('#k1').prop('value');
                            var row = $('#gridBets tr').has('td:nth-child(21):contains("' + k1 + '")').has('td:nth-child(22):contains("' + k2 + '")');
                            var row_id = k1 + k2;

                            addToCalc(refresh_currency, booker_id1, booker_id2, booker1, booker2, coef1, coef2, event_name1, event_name2,
                                event_name_full1, event_name_full2, bet1, bet2, eventUrl1, eventUrl2, is_direct_1, is_direct_2, event_l_id, k1, k2, row_id, bet_id1, bet_id2,
                                event_id1, event_id2, arrow_src1, arrow_src2, row, v1, v2);

                            //actualizeCalc();
                        }
                    }


                    //$("#ddBooker1").on("select2:select", function () {
                    $("#ddBooker1").on("change", function () {
                        booker1Change(true);
                    });

                    //$("#ddBooker2").on("select2:select", function () {
                    $("#ddBooker2").on("change", function () {
                        booker2Change(true);
                    });


                    $("#ddBooker1").on("select2:opening", function () {
                        if ($('#se').prop('value') == '0') {
                            if (needFillddBooker1) {

                                var bid1 = $('#bet_id1').attr('value');
                                var bid2 = undefined;
                                var eid1 = $('#event_id1').attr('value');
                                var eid2 = undefined;
                                var elid = parseInt($('#event_l_id').attr('value'));

                                refreshOdd(bid1, bid2, eid1, eid2, elid, $('#aRefreshOdd1'), 1, 0,
                                    function () {
                                        $('#ddBooker1').select2('open');
                                        needFillddBooker1 = true;
                                    });
                                return false;
                            }
                        }
                    });

                    $("#ddBooker2").on("select2:opening", function () {
                        if ($('#se').prop('value') == '0') {
                            if (needFillddBooker2) {
                                var bid1 = undefined;
                                var bid2 = $('#bet_id2').attr('value');
                                var eid1 = undefined;
                                var eid2 = $('#event_id2').attr('value');
                                var elid = parseInt($('#event_l_id').attr('value'));

                                refreshOdd(bid1, bid2, eid1, eid2, elid, $('#aRefreshOdd2'), 1, 0,
                                    function () {
                                        $('#ddBooker2').select2('open');
                                        needFillddBooker2 = true;
                                    });
                                return false;
                            }
                        }
                    });


                    //For grid
                    function addToCalc(refresh_currency, booker_id1, booker_id2, booker1, booker2, coef1, coef2, event_name1, event_name2,
                                       event_name_full1, event_name_full2, bet1, bet2, eventUrl1, eventUrl2, is_direct_1, is_direct_2, event_l_id, k1, k2, row_id, bet_id1, bet_id2,
                                       event_id1, event_id2, arrow_src1, arrow_src2, row, v1, v2) {

                        if (booker_id1) {
                            //if (!jQuery.isEmptyObject(settingsJSON)){
                            if (refresh_currency) {
                                var currency_id1 = settingsJSON.booker_settings[booker_id1].currency_id;
                                var round_precision1 = settingsJSON.booker_settings[booker_id1].round_precision;
                                var commission1 = settingsJSON.booker_settings[booker_id1].commission;
                                $('#ddlCurrency1').prop('value', currency_id1);
                                $('#ddlroundPrecision1').prop('value', round_precision1);
                                $('#tfCommission1').prop('value', commission1);
                            }

                            if (typeof is_direct_1 !== 'undefined') {
                                $('#hdIs_direct_1').prop('value', is_direct_1);
                            }

                            var currOption = $('#ddBooker1').find("option[value=" + booker_id1 + "]");
                            if (!currOption.length) {

                                var newOption = new Option(booker1 + (coef1 ? ': ' + coef1 : ''), booker_id1, true, true);
                                $('#ddBooker1').append(newOption);
                            }
                            else {
                                //currOption.text(booker1+': '+coef1);
                            }
                            //$("#ddBooker1").val(booker_id1);

                            var lnkEvent_name1 = $('#lnkEvent_name1');
                            lnkEvent_name1.text(event_name1);

                            $('#lEvent_name1').html(event_name_full1);
                            $('#lBet1').text(bet1);
                            $('#lBet1').prop('href', eventUrl1);
                            if (coef1) {
                                $('#lBet1').css('font-style', 'normal');
                                $('#lBet1').css('text-decoration', 'none');
                            }
                            else {
                                $('#lBet1').css('font-style', 'italic');
                                $('#lBet1').css('text-decoration', 'line-through');
                            }


                            $('#bet_id1').prop('value', bet_id1);
                            $('#event_id1').prop('value', event_id1);
                            $('#booker_id1').prop('value', booker_id1);
                            $('#imgArrow1').prop('src', arrow_src1);
                            $('#k1').prop('value', k1);

                            //$('#lCommission1').text(commissionValue1);
                            //$('#lCommission2').text(commissionValue2);
                            //$('#tfLiability1').prop('value', liability1);
                            //$('#tfLiability2').prop('value', liability2);

                            $("#tfCoef1").toggleClass('error', false);
                            $('#tfCoef1').prop('value', coef1);

                            if (v1) {
                                omd.v1 = v1;
                            }
                        }


                        if (booker_id2) {
                            //if (!jQuery.isEmptyObject(settingsJSON)){
                            if (refresh_currency) {
                                var currency_id2 = settingsJSON.booker_settings[booker_id2].currency_id;
                                var round_precision2 = settingsJSON.booker_settings[booker_id2].round_precision;
                                var commission2 = settingsJSON.booker_settings[booker_id2].commission;
                                $('#ddlCurrency2').prop('value', currency_id2);
                                $('#ddlroundPrecision2').prop('value', round_precision2);
                                $('#tfCommission2').prop('value', commission2);
                            }

                            if (typeof is_direct_2 !== 'undefined') {
                                $('#hdIs_direct_2').prop('value', is_direct_2);
                            }

                            var currOption = $('#ddBooker2').find("option[value=" + booker_id2 + "]");
                            if (!currOption.length) {
                                var newOption = new Option(booker2 + (coef2 ? ': ' + coef2 : ''), booker_id2, true, true);
                                $('#ddBooker2').append(newOption);
                            }
                            else {
                                //currOption.text(booker2+': '+coef2);
                            }
                            //$("#ddBooker2").val(booker_id2);

                            var lnkEvent_name2 = $('#lnkEvent_name2');
                            lnkEvent_name2.text(event_name2);


                            $('#lBet2').text(bet2);
                            $('#lBet2').prop('href', eventUrl2);
                            if (coef2) {
                                $('#lBet2').css('font-style', 'normal');
                                $('#lBet2').css('text-decoration', 'none');
                            }
                            else {
                                $('#lBet2').css('font-style', 'italic');
                                $('#lBet2').css('text-decoration', 'line-through');
                            }


                            $('#bet_id2').prop('value', bet_id2);
                            $('#event_id2').prop('value', event_id2);
                            $('#booker_id2').prop('value', booker_id2);
                            $('#imgArrow2').prop('src', arrow_src2);
                            $('#k2').prop('value', k2);

                            //$('#lCommission2').text(commissionValue2);
                            //$('#tfLiability2').prop('value', liability2);

                            $("#tfCoef2").toggleClass('error', false);
                            $('#tfCoef2').prop('value', coef2);

                            if (v2) {
                                omd.v2 = v2;
                            }
                        }

                        if (event_l_id) {
                            $('#event_l_id').prop('value', event_l_id);
                        }

                        $('#crid').prop('value', row_id);
                        cridd = new Date();


                        $('#tfCoef2').trigger('keyup');
                        $('.hideBet').popover('destroy');
                        $('.refreshOdd').popover('destroy');


                        $('.addToCalc').children('img').prop('src', '../static/images/calc.png');
                        row.children(":nth-child(1)").children(".addToCalc").children("img").prop('src', '../static/images/calc2.png');
                    }


                    function addToCalcRow(row) {
                        needFillddBooker1 = true;
                        needFillddBooker2 = true;

                        //var currency_id1 = row.children(":nth-child(9)").html();
                        //var currency_id2 = row.children(":nth-child(10)").html();
                        //var booker1 = row.children(":nth-child(11)").html();
                        //var booker2 = row.children(":nth-child(12)").html();
                        var booker1 = row.children(":nth-child(3)").children('a, div').eq(0).text();
                        var booker2 = row.children(":nth-child(3)").children('a, div').eq(1).text();
                        //var bookerUrl1 = row.children(":nth-child(13)").html();
                        //var bookerUrl2 = row.children(":nth-child(14)").html();
                        var bookerUrl1 = row.children(":nth-child(3)").children('a').eq(0).prop('href');
                        var bookerUrl2 = row.children(":nth-child(3)").children('a').eq(1).prop('href');
                        //var event_name1 = row.children(":nth-child(15)").html();
                        //var event_name2 = row.children(":nth-child(16)").html();
                        var event_name_full1 = '<b>' + row.children(":nth-child(4)").children('a:not(.copyClipboard), div').eq(0).text() + '</b>' + '<small>' + row.children(":nth-child(4)").children('small').eq(0).html() + '</small>';
                        var event_name_full2 = undefined;
                        var event_name1 = row.children(":nth-child(4)").children('a:not(.copyClipboard), div').eq(0).text();
                        var event_name2 = row.children(":nth-child(4)").children('a:not(.copyClipboard), div').eq(1).text();
//      if (event_name1 != '')
//          event_name_full1 = row.children(":nth-child(2)").children('nobr').eq(0).text() + '% ' + event_name_full1;
                        //var event_name1 = row.children(":nth-child(4)").children('a').eq(0).text();
                        //var event_name2 = row.children(":nth-child(4)").children('a').eq(1).text();
                        //var eventUrl1 = row.children(":nth-child(17)").text();
                        //var eventUrl1OnClick = row.children(":nth-child(4)").children('a').eq(0).attr("onclick");
                        var eventUrl1 = row.children(":nth-child(4)").children('a:not(.copyClipboard)').eq(0).prop('href');
                        //if (!eventUrl1)
                        //  eventUrl1 = row.children(":nth-child(4)").children('div').eq(0).attr('href');
                        //var eventUrl2 = row.children(":nth-child(18)").text();
                        //var eventUrl2OnClick = row.children(":nth-child(4)").children('a').eq(1).attr("onclick");
                        var eventUrl2 = row.children(":nth-child(4)").children('a:not(.copyClipboard)').eq(1).prop('href');
                        //if (!eventUrl2)
                        //  eventUrl2 = row.children(":nth-child(4)").children('div').eq(1).attr('href');
                        //var commission1 = row.children(":nth-child(11)").html();
                        //var commission2 = row.children(":nth-child(12)").html();
                        var is_direct_1 = parseInt(row.children(":nth-child(9)").html());
                        var is_direct_2 = parseInt(row.children(":nth-child(10)").html());
                        var coef1 = row.children(":nth-child(7)").html();
                        var coef2 = row.children(":nth-child(8)").html();
                        if (is_direct_1 == 0) {
                            coef1 = roundNumber(coef1 / (coef1 - 1), 2)
                        }
                        if (is_direct_2 == 0) {
                            coef2 = roundNumber(coef2 / (coef2 - 1), 2)
                        }

                        var bet1 = row.children(":nth-child(11)").html();
                        var bet2 = row.children(":nth-child(12)").html();
                        var bet_id1 = row.children(":nth-child(13)").html();
                        var bet_id2 = row.children(":nth-child(14)").html();
                        var event_id1 = row.children(":nth-child(15)").html();
                        var event_id2 = row.children(":nth-child(16)").html();
                        var booker_id1 = row.children(":nth-child(18)").html();
                        var booker_id2 = row.children(":nth-child(19)").html();
                        var event_l_id = row.children(":nth-child(20)").html();
                        var k1 = row.children(":nth-child(21)").html();
                        var k2 = row.children(":nth-child(22)").html();

                        var md = row.children(":nth-child(23)").html();
                        //if (typeof md === 'object'){
                        if (md) {
                            omd = JSON && JSON.parse(md) || $.parseJSON(md);
                        }
                        var v1 = undefined;
                        var v2 = undefined;

                        //var row_id = row.attr("id");
                        var row_id = k1 + k2;
                        //var logic_btg_id = row.children(":nth-child(25)").html();
                        var arrow_src1 = row.children(":nth-child(6)").children('nobr').eq(0).children('a').children('img').prop('src');
                        var arrow_src2 = row.children(":nth-child(6)").children('nobr').eq(1).children('a').children('img').prop('src');


                        oddNullUpdateCnt = 0;
                        $("#ddBooker1").empty();
                        $("#ddBooker2").empty();
                        addToCalc(true, booker_id1, booker_id2, booker1, booker2, coef1, coef2, event_name1, event_name2,
                            event_name_full1, event_name_full2, bet1, bet2, eventUrl1, eventUrl2, is_direct_1, is_direct_2, event_l_id, k1, k2, row_id, bet_id1, bet_id2,
                            event_id1, event_id2, arrow_src1, arrow_src2, row, v1, v2);

                    }


                    function hideBet(row, btn) {
                        //var booker1 = row.children(":nth-child(11)").html();
                        //var booker2 = row.children(":nth-child(12)").html();
                        var booker1 = row.children(":nth-child(3)").children('a, div').eq(0).text();
                        var booker2 = row.children(":nth-child(3)").children('a, div').eq(1).text();
                        //var event_name1 = row.children(":nth-child(13)").html();
                        //var event_name2 = row.children(":nth-child(14)").html();
                        var event_name1 = row.children(":nth-child(4)").children('a:not(.copyClipboard), div').eq(0).text();
                        var event_name2 = row.children(":nth-child(4)").children('a:not(.copyClipboard), div').eq(1).text();
                        var bet1 = row.children(":nth-child(11)").html();
                        var bet2 = row.children(":nth-child(12)").html();
                        var bet_id1 = row.children(":nth-child(13)").html();
                        var bet_id2 = row.children(":nth-child(14)").html();
                        var event_id1 = row.children(":nth-child(15)").html();
                        var event_id2 = row.children(":nth-child(16)").html();
                        var event_l_id = row.children(":nth-child(20)").html();
                        var row_id = row.attr("id");


                        var cont = '';
                        if (row_id)
                            cont = cont + "<p><a href=\"javascript:void(0)\" onclick=\"$('.hideBet').popover('destroy'); rowsHide('" + row_id + "', undefined, undefined, undefined, undefined, undefined);\">" + aOnlyThisBetValue + "</a><\p>";
                        if (bet_id1)
                            cont = cont + "<p><a href=\"javascript:void(0)\" onclick=\"$('.hideBet').popover('destroy'); rowsHide(undefined, '" + bet_id1 + "', undefined, undefined, undefined, undefined);\">" + aAllWithValue + booker1 + ", " + event_name1 + ", " + bet1 + "</a><\p>";
                        if (bet_id2)
                            cont = cont + "<p><a href=\"javascript:void(0)\" onclick=\"$('.hideBet').popover('destroy'); rowsHide(undefined, '" + bet_id2 + "', undefined, undefined, undefined, undefined);\">" + aAllWithValue + booker2 + ", " + event_name2 + ", " + bet2 + "</a><\p>";
                        if (bet_id1 && bet_id2)
                            cont = cont + "<p><a href=\"javascript:void(0)\" onclick=\"$('.hideBet').popover('destroy'); rowsHide(undefined, '" + bet_id1 + "','" + bet_id2 + "', undefined, undefined, undefined);\">" + aAllWithValue + event_name1 + ", " + booker1 + " " + bet1 + ", " + booker2 + " " + bet2 + "</a><\p>";
                        if (event_id1)
                            cont = cont + "<p><a href=\"javascript:void(0)\" onclick=\"$('.hideBet').popover('destroy'); rowsHide(undefined, undefined, undefined, '" + event_id1 + "', undefined, undefined);\">" + aAllWithValue + booker1 + ", " + event_name1 + "</a><\p>";
                        if (event_id2)
                            cont = cont + "<p><a href=\"javascript:void(0)\" onclick=\"$('.hideBet').popover('destroy'); rowsHide(undefined, undefined, undefined, '" + event_id2 + "', undefined, undefined);\">" + aAllWithValue + booker2 + ", " + event_name2 + "</a><\p>";
                        if (event_id1 && event_id2)
                            cont = cont + "<p><a href=\"javascript:void(0)\" onclick=\"$('.hideBet').popover('destroy'); rowsHide(undefined, undefined, undefined, '" + event_id1 + "','" + event_id2 + "', undefined);\">" + aAllWithValue + booker1 + ", " + booker2 + ", " + event_name1 + "</a><\p>";
                        if (event_l_id)
                            cont = cont + "<p><a href=\"javascript:void(0)\" onclick=\"$('.hideBet').popover('destroy'); rowsHide(undefined, undefined, undefined, undefined, undefined, '" + event_l_id + "');\">" + aAllWithValue + event_name1 + "</a><\p>";
                        if (!cont) {
                            cont = aFunctionUnavailable;
                        }

                        $('.hideBet').popover('destroy');
                        $('.refreshOdd').popover('destroy');


                        btn.popover({
                            placement: "right",
                            trigger: "manual",
                            //container: "body",
                            //title: 'Popover Title <a class="close" href="#">&times;</a>',
                            html: "true",
                            content: cont
                        });
                        btn.popover("show");
                        $('.popover-title').append('<button type="button" class="close" onclick="$(&quot;.hideBet&quot;).popover(&quot;destroy&quot;);">&times;</button>');
                        //$('.close').click(function(e){$('.hideBet').popover('destroy');});
                    }


                    function copyTextToClipboard(text) {
                        var textArea = document.createElement("textarea");

                        // Place in top-left corner of screen regardless of scroll position.
                        textArea.style.position = 'fixed';
                        textArea.style.top = 0;
                        textArea.style.left = 0;

                        // Ensure it has a small width and height. Setting to 1px / 1em
                        // doesn't work as this gives a negative w/h on some browsers.
                        textArea.style.width = '2em';
                        textArea.style.height = '2em';

                        // We don't need padding, reducing the size if it does flash render.
                        textArea.style.padding = 0;

                        // Clean up any borders.
                        textArea.style.border = 'none';
                        textArea.style.outline = 'none';
                        textArea.style.boxShadow = 'none';

                        // Avoid flash of white box if rendered for any reason.
                        textArea.style.background = 'transparent';


                        textArea.value = text;

                        document.body.appendChild(textArea);

                        textArea.select();

                        try {
                            var successful = document.execCommand('copy');
                        } catch (err) {
                            console.log('Unable to copy');
                        }

                        document.body.removeChild(textArea);
                    }


                    function booker1Fill(od) {

                        var booker_id1 = $('#booker_id1').prop('value');
                        var booker1 = settingsJSON.booker_settings[booker_id1].name;

                        $("#ddBooker1").empty();

                        settingsJSON.coefs1 = {};
                        if (!$.grep(od.coefs1, function (e) {
                                return e.booker_id == booker_id1;
                            }).length) {

                            settingsJSON.coefs1[booker_id1] = {};
                            settingsJSON.coefs1[booker_id1].coef = undefined;
                            settingsJSON.coefs1[booker_id1].event_name = $('#lnkEvent_name1').text();
                            settingsJSON.coefs1[booker_id1].event_name_full = $('#lEvent_name1').html();
                            settingsJSON.coefs1[booker_id1].bet = $('#lBet1').text();
                            settingsJSON.coefs1[booker_id1].eventUrl = $('#lBet1').prop('href');
                            settingsJSON.coefs1[booker_id1].k = $('#k1').prop('value');
                            settingsJSON.coefs1[booker_id1].bet_id = $('#bet_id1').prop('value');
                            settingsJSON.coefs1[booker_id1].event_id = $('#event_id1').prop('value');
                            settingsJSON.coefs1[booker_id1].arrow_src = $('#imgArrow1').prop('src');
                            settingsJSON.coefs1[booker_id1].v = undefined;

                            var newOption = new Option(booker1, booker_id1, true, true);
                            $("#ddBooker1").append(newOption);

                        }

                        var cbOnly_selected_bookers_checked = $('#cbOnly_selected_bookers').is(':checked');

                        $.each(od.coefs1, function (i, item) {
                            if (!cbOnly_selected_bookers_checked || settingsJSON.booker_settings[item.booker_id].active < 2) {
                                settingsJSON.coefs1[item.booker_id] = {};
                                if (parseInt($('#hdIs_direct_1').prop('value')) == 0) {
                                    item.coef = roundNumber(item.coef / (item.coef - 1), 2);
                                }
                                settingsJSON.coefs1[item.booker_id].coef = item.coef;
                                settingsJSON.coefs1[item.booker_id].event_name = item.event_name;
                                settingsJSON.coefs1[item.booker_id].event_name_full = '<b>' + item.event_name + '</b>' + '<small>' + (item.league ? ' (' + item.league + ') ' : ' ') + item.score + '</small>';
                                settingsJSON.coefs1[item.booker_id].bet = item.bet;
                                settingsJSON.coefs1[item.booker_id].eventUrl = item.eventUrl;
                                settingsJSON.coefs1[item.booker_id].k = item.k;
                                settingsJSON.coefs1[item.booker_id].bet_id = item.bet_id;
                                settingsJSON.coefs1[item.booker_id].event_id = item.event_id;
                                settingsJSON.coefs1[item.booker_id].arrow_src = '/images/arrow' + item.moved + '.png';
                                settingsJSON.coefs1[item.booker_id].v = item.v;

                                var newOption = new Option(item.name + ': ' + item.coef, item.booker_id, (item.booker_id == booker_id1), (item.booker_id == booker_id1));
                                $("#ddBooker1").append(newOption);
                            }
                        });

                        //$("#ddBooker1").trigger('change');
                        booker1Change(false);
                    }


                    function booker2Fill(od) {
                        var booker_id2 = $('#booker_id2').prop('value');
                        var booker2 = settingsJSON.booker_settings[booker_id2].name;

                        $("#ddBooker2").empty();

                        settingsJSON.coefs2 = {};
                        if (!$.grep(od.coefs2, function (e) {
                                return e.booker_id == booker_id2;
                            }).length) {

                            settingsJSON.coefs2[booker_id2] = {};
                            settingsJSON.coefs2[booker_id2].coef = undefined;
                            settingsJSON.coefs2[booker_id2].event_name = $('#lnkEvent_name2').text();
                            settingsJSON.coefs2[booker_id2].event_name_full = undefined;
                            settingsJSON.coefs2[booker_id2].bet = $('#lBet2').text();
                            settingsJSON.coefs2[booker_id2].eventUrl = $('#lBet2').prop('href');
                            settingsJSON.coefs2[booker_id2].k = $('#k2').prop('value');
                            settingsJSON.coefs2[booker_id2].bet_id = $('#bet_id2').prop('value');
                            settingsJSON.coefs2[booker_id2].event_id = $('#event_id2').prop('value');
                            settingsJSON.coefs2[booker_id2].arrow_src = $('#imgArrow2').prop('src');
                            settingsJSON.coefs2[booker_id2].v = undefined;

                            var newOption = new Option(booker2, booker_id2, true, true);
                            $("#ddBooker2").append(newOption);

                        }

                        var cbOnly_selected_bookers_checked = $('#cbOnly_selected_bookers').is(':checked');

                        $.each(od.coefs2, function (i, item) {
                            if (!cbOnly_selected_bookers_checked || settingsJSON.booker_settings[item.booker_id].active < 2) {
                                settingsJSON.coefs2[item.booker_id] = {};
                                if (parseInt($('#hdIs_direct_2').prop('value')) == 0) {
                                    item.coef = roundNumber(item.coef / (item.coef - 1), 2);
                                }
                                settingsJSON.coefs2[item.booker_id].coef = item.coef;
                                settingsJSON.coefs2[item.booker_id].event_name = item.event_name;
                                settingsJSON.coefs2[item.booker_id].event_name_full = '<b>' + item.event_name + '</b>' + '<small>' + (item.league ? ' (' + item.league + ') ' : ' ') + item.score + '</small>';
                                settingsJSON.coefs2[item.booker_id].bet = item.bet;
                                settingsJSON.coefs2[item.booker_id].eventUrl = item.eventUrl;
                                settingsJSON.coefs2[item.booker_id].k = item.k;
                                settingsJSON.coefs2[item.booker_id].bet_id = item.bet_id;
                                settingsJSON.coefs2[item.booker_id].event_id = item.event_id;
                                settingsJSON.coefs2[item.booker_id].arrow_src = '/images/arrow' + item.moved + '.png';
                                settingsJSON.coefs2[item.booker_id].v = item.v;

                                var newOption = new Option(item.name + ': ' + item.coef, item.booker_id, (item.booker_id == booker_id2), (item.booker_id == booker_id2));
                                $("#ddBooker2").append(newOption);
                            }
                        });

                        //$("#ddBooker2").trigger('change');
                        booker2Change(false);
                    }


                    function refreshOdd(bid1, bid2, eid1, eid2, elid, el, gac, check_time, callback) {

                        if (bid1)
                            needFillddBooker1 = false;
                        if (bid2)
                            needFillddBooker2 = false;


                        $('.refreshOdd').popover('destroy');
                        $('.hideBet').popover('destroy');

                        var currentDate = new Date();
                        var diffSec = (currentDate.getTime() - cridd.getTime()) / 1000;
                        if (diffSec > 3600 * 4) {
                            if (typeof callback == "function") callback();
                            return;
                        }

                        if (check_time) {
                            var currentDate = new Date();
                            var diffSec = (currentDate.getTime() - oddLastUpdateDate.getTime()) / 1000;
                            if (diffSec < 1) {
                                if (typeof callback == "function") callback();
                                return;
                            }
                        }
                        oddLastUpdateDate = new Date();

                        if (oddNullUpdateCnt > 30) {
                            if (typeof callback == "function") callback();
                            return;
                        }


                        var cont = undefined;
                        if ($('#se').prop('value') == '1') {
                            cont = aFunctionUnavailable;
                        }
                        else if (!bid1 && !bid2 || !elid) {
                            cont = aAddToCalc;
                        }

                        if (cont) {
                            el.popover({
                                placement: 'right',
                                trigger: 'manual',
                                html: 'true',
                                content: cont
                            });
                            el.popover('show');
                            $('.popover-title').append('<button type="button" class="close" onclick="$(&quot;.refreshOdd&quot;).popover(&quot;destroy&quot;);">&times;</button>');

                            if (typeof callback == "function") callback();
                        }
                        else {

                            if (bid1)
                                $("#tfCoef1").toggleClass('error', false);
                            if (bid2)
                                $("#tfCoef2").toggleClass('error', false);


                            el.children('img').prop('src', '../../images/loading.gif');
                            if (bid1)
                                $('#aRefreshOdd1').children('img').prop('src', '../../images/loading.gif');
                            if (bid2)
                                $('#aRefreshOdd2').children('img').prop('src', '../../images/loading.gif');

                            var crid = $('#crid').prop('value');
                            var k1 = $('#k1').prop('value');
                            var k2 = $('#k2').prop('value');

                            $.ajax({
                                url: "refreshOdd",
                                timeout: 60000,
                                data: {
                                    'bid1': bid1,
                                    'bid2': bid2,
                                    'eid1': eid1,
                                    'eid2': eid2,
                                    'elid': elid,
                                    'crid': crid,
                                    'k1': k1,
                                    'k2': k2,
                                    'gac': gac,
                                    'isAjax': 'true'
                                },
                            })
                                .always(function () {
                                    el.children('img').prop('src', '../../images/refresh.png');
                                    if (bid1)
                                        $('#aRefreshOdd1').children('img').prop('src', '../../images/refresh.png');
                                    if (bid2)
                                        $('#aRefreshOdd2').children('img').prop('src', '../../images/refresh.png');
                                })
                                .error(function () {
                                    if (bid1) {
                                        $("#tfCoef1").toggleClass('error', true);
                                    }
                                    if (bid2) {
                                        $("#tfCoef2").toggleClass('error', true);
                                    }
                                })
                                .done(function (data) {

                                    if (data == 'logout') {
                                        window.location.href = "https://positivebet.com/user/logout?message=featureLogin";
                                    }
                                    else if (data == 'tooFrequentRequests') {
                                        window.location.href = "https://positivebet.com/user/logout?message=tooFrequentRequests";
                                    }
                                    else {
                                        try {
                                            od = JSON && JSON.parse(data) || $.parseJSON(data);
                                        } catch (e) {
                                            od = {};
                                        }


                                        if (bid1) {
                                            if (od.hasOwnProperty("coefs1") && od.coefs1) {
                                                booker1Fill(od);
                                            }
                                            else {
                                                //window.location.href = "/user/logout?message=featureLogin";
                                                $("#tfCoef1").toggleClass('error', true);
                                            }
                                        }


                                        if (bid2) {
                                            if (od.hasOwnProperty("coefs2") && od.coefs2) {
                                                booker2Fill(od);
                                            }
                                            else {
                                                //window.location.href = "/user/logout?message=featureLogin";
                                                $("#tfCoef2").toggleClass('error', true);
                                            }
                                        }


                                        if (bid1 && bid2) {
                                            if (od.hasOwnProperty("coefs1") && od.hasOwnProperty("coefs2") && od.coefs1 && od.coefs2 && od.coefs1.length == 0 && od.coefs2.length == 0) {
                                                oddNullUpdateCnt++;
                                            }
                                        }

                                        if (typeof callback == "function") callback();

                                    }
                                });
                        }
                    }


                </script>


            </div><!-- content -->
        </div>
        <div class="span3">
            <div id="sidebar">
            </div><!-- sidebar -->
        </div>
    </div>

    <div class="clear"></div>

    <br/>
    <br/>

</div><!-- page -->


<script type="text/javascript" src="../static/assets/c1c3c894/gridview/jquery.yiigridview.js"></script>
<script type="text/javascript">
    /*<![CDATA[*/
    jQuery(function ($) {
        $('#ddBooker1').select2({
            'dropdownAutoWidth': true,
            'width': 109,
            'containerCssClass': 'positiveSelect',
            'dropdownCssClass': 'positiveSelect',
            'minimumResultsForSearch': -1
        });
        $('#ddBooker2').select2({
            'dropdownAutoWidth': true,
            'width': 109,
            'containerCssClass': 'positiveSelect',
            'dropdownCssClass': 'positiveSelect',
            'minimumResultsForSearch': -1
        });
        jQuery('#formCalc').yiiactiveform({
            'validateOnSubmit': true,
            'attributes': [{
                'id': 'Bets_auto_update_odd',
                'inputID': 'Bets_auto_update_odd',
                'errorID': 'Bets_auto_update_odd_em_',
                'model': 'Bets',
                'name': 'Bets\x5Bauto_update_odd\x5D',
                'enableAjaxValidation': false,
                'inputContainer': 'div.control\x2Dgroup'
            }, {
                'id': 'Bets_distribute_stake1',
                'inputID': 'Bets_distribute_stake1',
                'errorID': 'Bets_distribute_stake1_em_',
                'model': 'Bets',
                'name': 'Bets\x5Bdistribute_stake1\x5D',
                'enableAjaxValidation': false,
                'inputContainer': 'div.control\x2Dgroup'
            }, {
                'id': 'Bets_fix_stake',
                'inputID': 'Bets_fix_stake',
                'errorID': 'Bets_fix_stake_em_',
                'model': 'Bets',
                'name': 'Bets\x5Bfix_stake\x5D',
                'enableAjaxValidation': false,
                'inputContainer': 'div.control\x2Dgroup'
            }, {
                'id': 'Bets_distribute_stake2',
                'inputID': 'Bets_distribute_stake2',
                'errorID': 'Bets_distribute_stake2_em_',
                'model': 'Bets',
                'name': 'Bets\x5Bdistribute_stake2\x5D',
                'enableAjaxValidation': false,
                'inputContainer': 'div.control\x2Dgroup'
            }, {
                'id': 'Bets_only_selected_bookers',
                'inputID': 'Bets_only_selected_bookers',
                'errorID': 'Bets_only_selected_bookers_em_',
                'model': 'Bets',
                'name': 'Bets\x5Bonly_selected_bookers\x5D',
                'enableAjaxValidation': false,
                'inputContainer': 'div.control\x2Dgroup'
            }],
            'errorCss': 'error'
        });
        jQuery(document).on('click', '#gridBets a.addToCalc', function (e) {
            e.preventDefault();
            var row = $(this).parent().parent();
            addToCalcRow(row);
            return false;
        });
        jQuery(document).on('click', '#gridBets a.hideBet', function (e) {
            e.preventDefault();
            var row = $(this).parent().parent();

            var btn = $(this);
            hideBet(row, btn);

            return false;
        });
        jQuery('#gridBets').yiiGridView({
            'ajaxUpdate': ['gridBets'],
            'ajaxVar': 'ajax',
            'pagerClass': 'pagination',
            'loadingClass': 'grid\x2Dview\x2Dloading',
            'filterClass': 'filters',
            'tableClass': 'items\x20table\x20table\x2Dstriped\x20table\x2Dbordered\x20table\x2Dcondensed',
            'selectableRows': 1,
            'enableHistory': false,
            'updateSelector': '\x7Bpage\x7D,\x20\x7Bsort\x7D',
            'filterSelector': '\x7Bfilter\x7D',
            'url': '\x2Fen\x2Fbets\x2Findex'
        });
        jQuery('body').tooltip({'selector': 'a\x5Brel\x3Dtooltip\x5D'});
        jQuery('body').popover({'selector': 'a\x5Brel\x3Dpopover\x5D'});
    });
    /*]]>*/
</script>
</body>

<!-- Mirrored from positivebet.com/en/bets/index by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 26 Feb 2018 11:24:30 GMT -->
</html>